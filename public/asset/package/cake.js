(()=>{var A=(e,i)=>()=>(i||e((i={exports:{}}).exports,i),i.exports);var we=A(()=>{(function(e){e.env={destructure:!0};let i=e.env;try{let{a:r}={a:!0}}catch{i.destructure=!1}Promise.prototype.ObjectType="Promise"})(window)});var Se=A(()=>{(function(e){HTMLCollection.prototype.toArray=function(){let i=[];for(let r=0;r<this.length;r++)i[r]=this[r];return i},NodeList.prototype.toArray=function(){let i=[],r=-1,t=this.length;for(;++r<t;)i[r]=this[r];return i},Object.cache=Object.create(null),Object.caching=i=>{let r=Object.cache;return r[i]||(r[i]={}),{set(t,n){return r[i][t]=n,!0},get(t){return r[i][t]}}},String.prototype.toHyphen=function(){let i=Object.cache,r=null,t=this;if(i.toHyphen||(i.toHyphen={}),i[t]&&(r=i[t]),r!=null)return r;let n=t.split(""),s="",a=-1;for(;++a<n.length;){let u=n[a];switch(a){case 0:s+=u.toLowerCase();break;default:u.charCodeAt()<91&&(s+="-"),s+=u.toLowerCase()}}return i[t]=s,r=s,r},String.prototype.toProper=function(){let i=this,r=Object.caching("toProper").get(i);if(r)return r;{let t=i.substring(0,1),n=i.slice(1),s=`${t.toUpperCase()}${n}`;return Object.caching("toProper").set(i,s),s}},String.prototype.toCamelCase=function(){let i=this.toLowerCase(),r=Object.cache,t=null;if(r.toCamel||(r.toCamel={}),r=r.toCamel,r[i])return r[i];{let n=i.split("-");if(n.length==1)return i;let s="",a=-1,u=n.length;for(;++a<u;){let h=n[a];switch(a){case 0:s+=h;break;default:{let f=h.substring(0,1).toUpperCase(),p=h.substring(1);s+=f+p}break}}return r[i]=s,s}},HTMLElement.prototype.querySelectorIncluded=function(i,r,t){let n=this.querySelector(i);return n||(()=>{switch(!0){case(!r&&!t):{let s=this.closest(i);s==this&&(n=s)}break;case(!!r&&!!t):n=this.getAttribute(r)==t?this:null;break;case(!!r&&!t):n=this.getAttribute(r)?this:null;break}return n})()},HTMLElement.prototype.querySelectorAllIncluded=function(i,r,t){let n=this.querySelectorAll(i).toArray();switch(!0){case(!r&&!t):{let s=this.closest(i);s==this&&n.push(s)}break;case(r&&t):this.getAttribute(r)==t&&n.push(this);break;case(r&&!t):this.getAttribute(r)&&n.push(this);break}return n},HTMLDocument.prototype.querySelectorIncluded=function(i){return this.querySelector(i)},HTMLDocument.prototype.querySelectorAllIncluded=function(i){return this.querySelectorAll(i)},Array.prototype.toggler=function(i,r){for(let t=0;t<this.length;t++){let n=this[t];(n.dataset.name==i||n.classList.contains(r))&&n.classList.toggle(r)}},HTMLElement.prototype.Ref=function(){let i="_cakes_storage";!this[i]&&(this._cakes_storage={});let r=this[i];return{set(t,n){r[t]=n},get(t){return r[t]},getAll(t){return r},remove(t){delete r[t]}}}})(window)});var ke=A(()=>{Object.keys||(Object.keys=function(e){var i=[];for(var r in e)e.hasOwnProperty(r)&&i.push(r);return i})});var B=A((ci,_e)=>{var X={},G={typeof:function(e){switch(!0){case typeof e=="string":return"string";case typeof e=="number":return"number";case e instanceof Array:return"array";case e instanceof Function:return"function";case e instanceof HTMLCollection:return"htmlcollection";case e instanceof NodeList:return"htmlnodelist";case e instanceof Element:return"domlement";case e instanceof Object:return"object"}},isArray:function(e){return this.typeof(e)=="array"},isObject:function(e){return this.typeof(e)=="object"},isNumber:function(e){return this.typeof(e)=="number"},isString:function(e){return this.typeof(e)=="string"},isHTMLCollection:function(e){return this.typeof(e)=="htmlcollection"},isNodeList:function(e){return this.typeof(e)=="htmlnodelist"},isElement:function(e){return this.typeof(e)=="domlement"},isFunction:function(e){return this.typeof(e)=="function"}},ae={each:function(e,i,r){if(r=="object"){var t=0;for(var n in e)e.hasOwnProperty(n)&&(i({key:n,value:e[n]},t),t=t+1)}else for(var s=0;s<e.length;s++)i(e[s],s)},map:function(e,i){var r=G.isArray(e)||e.length?"array":"object",t=e.length&&r=="array"?[]:{};return this.each(e,function(n,s){var a=i(n,s);r=="object"?t[a.key]=a.value:t.push(a)},r),t},reduce:function(e,i,r){var t=G.typeof(e);return this.each(e,function(n,s){i=r(n,i,s)},t),i},filter:function(e,i){var r=G.isArray(e)||e.length?"array":"object",t=e.length&&r=="array"?[]:{};return this.each(e,function(n,s){var a=i(n,s);a&&(r=="object"?t[n.key]=n.value:t.push(n.value))},r),t}},Oe={perf:function(e){console.time("test"),e(),console.timeEnd("test")},logTest:function(e,i,r){try{e=JSON.parse(e)}catch{}try{r=JSON.parse(r)}catch{}switch(i){case"==":return e==r;case"!=":return e!=r;case"<":return e<r;case">":return e>r;case">=":return e>=r;case"<=":return e<=r}},toUrlSearchParams:function(e,i=!0){let r="";for(let t in e)if(e.hasOwnProperty(t)){let n=e[t];n.toString().includes("Object")&&(n=JSON.stringify(n)),i&&n?r+=`${encodeURI(t)}=${encodeURI(n)}&`:r+=`${encodeURI(t)}=${encodeURI(n)}&`}return r.slice(0,r.length-1)},sanitize:function(e){if(typeof e!="string")return e;let i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"},r=/[&<>"'/]/ig;return e.replace(r,t=>i[t])},toFormData:function(e,i={}){let r=new FormData(e),t={},n=new FormData;for(let[s,a]of r.entries())if(!(s&&s.includes("{{"))){let u,h=e[s];h&&h.closest&&!h.closest(".cake-template")&&(h.tagName=="INPUT"&&h.getAttribute("type")=="checkbox"?a=h.checked:(i.sanitize==null||!!i.sanitize)&&(a=this.sanitize(a)),i.json?i.trim?a!=""&&(t[s]=a):t[s]=a:n.append(s,a))}return i.json?t:n},splitBySpace:function(e,i){if(e&&(e=e.split(" "),G.isArray(e)))for(let r=0;r<e.length;r++)i(e[r])},toArray(e){let i=[];if(!e.length)return i;for(let r=0;r<e.length;r++)i.push(e[r]);return i},timeOut(e,i=1){setTimeout(()=>{e()},i)},instanceID(){return location.origin},removeWhiteSpace(e){return String(e).split(" ").join("")},recurse(e,i){return new Promise((r,t)=>{try{let n=e.length,s=0,a=()=>{n>s?(i(e[s]),s+=1,a()):r()};a()}catch(n){t(n.message)}})},browser(){if(window._browser)return window._browser;var e=!!window.opr&&!!opr.addons||!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,i=typeof InstallTrigger!="undefined",r=/constructor/i.test(window.HTMLElement)||function(u){return u.toString()==="[object SafariRemoteNotification]"}(!window.safari||safari.pushNotification),t=!!document.documentMode,n=!t&&!!window.StyleMedia,s=!!window.chrome&&!!window.chrome.webstore,a=(s||e)&&!!window.CSS;return window._browser=e?"Opera":i?"Firefox":r?"Safari":s?"Chrome":t?"IE":n?"Edge":a?"Blink":"Don't know"},isOpera(){return this.browser=="Opera"},isFirefox(){return this.browser()=="Firefox"},isSafari(){return this.browser=="Safari"},isChrome(){return this.browser=="Chrome"},isIE(){return this.browser=="IE"},isEdge(){return this.browser=="Edge"},isBlink(){return this.browser=="Blink"},device(){return navigator.userAgent.includes("Android")?"android":/iPhone|iPad|iPod/i.test(navigator.userAgent)?"IOS":"desktop"},isAndroid(){return this.device()=="android"},isIOS(){return this.device()=="ios"},isDesktop(){return this.device()=="desktop"}};try{X.UTILS={...ae,...G,...Oe}}catch{X.UTILS={},te=ae.each,te(ae,function(i,r){X.UTILS[i]=r}),te(G,function(i,r){X.UTILS[i]=r}),te(Oe,function(i,r){X.UTILS[i]=r})}var te;_e.exports=X.UTILS});var Pe=A(()=>{(function(){customElements.define("sub-template",class extends HTMLElement{constructor(){super()}connectedCallback(){this.replace(this)}replace(e){let i=e.dataset.template,r=document.getElementsByName(i);if(r.length>1){console.error(`template with name ${i} has more than one reference.`);return}if(!r)throw e.remove(),new Error(`${i} is not found!`);if(r[0]){let t=r[0];if(t.constructor.name=="HTMLTemplateElement"){if(t=t.content.cloneNode(!0).firstElementChild,!t)return;let n=e.attributes;for(let s=0;s<n.length;s++){let a=n[s];a.name!="data-template"&&t.setAttribute(a.name,a.value)}e.replaceWith(t)}else throw new Error(`${i} is not referred to a Template Element!`)}}}),HTMLTemplateElement.prototype.replaceSubTemplate=function(e){let i=e.getElementsByTagName("sub-template");if(i){i=i.toArray();for(let r=0;r<i.length;r++){let t=i[r];customElements.get("sub-template").prototype.replace(t)}}},HTMLTemplateElement.prototype.collectContent=function(){let e=this,i=null,r=e.cloneNode(!0),t=document.createDocumentFragment(),n=r.content.querySelector("style");n&&t.appendChild(n);let s=[];for(let a=0;a<r.content.children.length;a++){let u=r.content.children[0];this.replaceSubTemplate(u),s.push(u)}return i={style:t.children[0],others:s},i},HTMLTemplateElement.prototype.parseStyle=function(e){if(!e)return!1;var i=e.textContent;if(i=i.replace(/\s/g,""),!i.length)return;let r=!1,t=!1,n=!1,s=i.split(""),a="";i="";var u=!1;for(let h=0;h<s.length;h++){let f=s[h];f=="{"&&(r=!0,t=!0),f=="}"&&(r=!1,t=!1),!r&&f!="	"&&f!="}"&&f!=" "&&f!=";"&&(a+=f),t&&f!="	"&&f!="{"&f!=" "&&(i+=f),f=="}"&&(u||(u={}),u[a]=i,a="",i="")}return u},HTMLTemplateElement.prototype.parseHTML=function(e){if(e){var i=document.createElement("HTML");for(let r=0;r<e.length;r++){let t=e[r];i.append(t)}}return i||!1},HTMLTemplateElement.prototype.getContent=function(e){let{style:i,others:r}=this.collectContent(),t=this.parseStyle(i),n=this.parseHTML(r);for(let s in t)if(t.hasOwnProperty(s)){let a=n.querySelectorAll(s),u=t[s];for(let h=0;h<a.length;h++)a[h].setAttribute("style",u)}return n=e?n.children.toArray():n.innerHTML,n.length==1?n[0]:n}})()});var ie=A((fi,$e)=>{function x(e){this.el=x.toArray(e)}x.toArray=function(e){let i=[];switch(!0){case e instanceof Array:i=e;break;case(e.length&&e.tagName&&e.tagName!="FORM"&&!(e instanceof Array)):for(let r=0;r<e.length;r++)i.push(e[r]);break;case!(e instanceof Array):i=[e];break}return i};x.prototype.getElements=function(){return this.el};x.prototype.getElement=function(){return this.el[0]};x.prototype.remove=function(e){let i=-1,r=this.el.length,t=document.createDocumentFragment();for(;++i<r;){let n=this.el[i];n&&t.appendChild(n)}fr=null};x.prototype.replaceDataSrc=function(){let i=this.el[0].querySelectorAll("[data-src]");for(let r=0;r<i.length;r++)el=i[r],el.setAttribute("src",el.dataset.src),el.removeAttribute("data-src")};x.cloneNode=function(e){e=e instanceof Array?e:this.toArray(e);let i=[];for(let r=0;r<e.length;r++)i.push(e[r].cloneNode(!0));return new x(i)};x.prototype.dataset=function(e,i){let r=this.el.length,t=-1;for(;++t<r&&!(this.el[t].dataset[e]&&i(this.el[t])=="break"););return!0};x.prototype.getContainers=function(){return this.getElementsByDataset("container").container};x.prototype.cloneNode=function(e){return e=this.el,x.cloneNode(e)};x.prototype.getAllElements=function(){let e=this.el.length,i=[];switch(!0){case e==1:i=this.el[0].getElementsByTagName("*").toArray();break;case e>1:{let r=-1;for(;++r<e;){let n=this.el[r].getElementsByTagName("*");if(n)for(let s=0;s<n.length;s++)i.push(n[s])}}break}return i};x.prototype.appendTo=function(e,i){if(!e&&!e.attributes)throw new TypeError(`the ${e} is not an instance of Element`);i&&(e.innerHTML="");for(let r=0;r<this.el.length;r++){let t=this.el[r];e.appendChild(t)}};x.prototype.getElementsByTagName=function(e){let i=this.el.length,r=[];switch(!0){case i==1:r=this.el[0].getElementsByTagName(id).toArray();break;case i>1:{let t=-1;for(;++t<i;){let s=this.el[t].getElementsByTagName(selector);if(s)for(let a=0;a<s.length;a++)r.push(s[a])}}break}return r};x.prototype.getElementById=function(e){let i=this.el.length,r=[];switch(!0){case i==1:r=this.el[0].getElementById(id);break;case i>1:{let t=-1;for(;++t<i;){let s=this.el[t].querySelector(selector);s&&r.push(s)}}break}return r};x.prototype.querySelectorAll=function(e){let i=this.el.length,r=[];switch(!0){case i==1:r=this.el[0].querySelectorAll(e);break;case i>1:{let t=[],n=-1;for(;++n<i;){let a=this.el[n].querySelectorAll(e);a&&(r=r.concat(a.toArra()))}}break;default:r=[]}return r};x.prototype.querySelector=function(e){let i=this.el.length,r=[];switch(!0){case i==1:r=this.el[0].querySelector(e);break;case i>1:{let t=-1;for(;++t<i;){let s=this.el[t].querySelector(e);s&&r.push(s)}}break}return r};x.prototype.querySelectorIncluded=function(e,i,r){let t=this.el.length,n=[];switch(!0){case t==1:n=this.el[0].querySelectorIncluded(e,i,r);break;case t>1:{let s=-1;for(;++s<t;){let u=this.el[s].querySelectorIncluded(e,i,r);u&&n.push(u)}}break}return n};x.prototype.querySelectorAllIncluded=function(e,i,r){let t=this.el.length,n=[];switch(!0){case t==1:n=this.el[0].querySelectorAllIncluded(e,i,r);break;case t>1:{let s=-1;for(;++s<t;){let u=this.el[s].querySelectorAllIncluded(e,i,r);u&&(n=n.concat(u.toArra()))}}break}return n};x.prototype.contains=function(e){let i=this.el.length,r=!1;switch(i==1){case!0:r=this.el[0].contains(e);break;case!1:{let t=-1;for(;++t<i;)if(this.el[t].contains(e)){r=!0;break}}break}return r};x.prototype.getElementsByDataset=function(){let e,i,r,t,n,s;for(e=arguments,o={},length=e.length,r=-1,t=-1;++r<this.el.length;)for(n=this.el[r];++t<length;)i=e[t],n.getAttribute(`data-${i}`)?o[i]=[n]:o[i]=[],s=n.querySelectorAll(`[data-${i}]`),s.length&&(o[i]=o[i].concat([...s]));return o};$e.exports=x});var ce=A((pi,Ee)=>{function re(e,i,r){this.subscribe=e,this.handlers=i,this.logger=r||!1,this.stat={handlers:{},subscribe:{}},this.results={},this.wm=new WeakMap}re.prototype.notify=function(e,i,r,t,n,s){function a(){return{_component:e,_event:i,_e:r}}function u(c){return c}let{_component:h,_event:f,_e:p}=a(),d=this.handlers[h]&&this.handlers[h][f];if(d==null&&n){let c={[f]:function(){return p}};c[f].binded=h,c[f].listenTo=s,d=c[f]}if(h=d.binded,d=d,!d){console.error(`no setup handler for the event ${f} in ${h} component`);return}let m=new Promise((c,g)=>{let y=d(p);c(y)});return this.stat.handlers[d.original]+=1,m.then(c=>{let g=[];if(this.results[h]||(this.results[h]={}),this.subscribe[h]&&this.subscribe[h][f]){let y=this.subscribe[h][f];t=t?(()=>{y=y.filter(b=>{let v=b.binded;return t.includes(v)})})():!0;for(let b=0;b<y.length;b++){let v=y[b];this.stat.subscribe[v.original]+=1,g.push(new Promise((w,S)=>{try{let k=(()=>v(c))();k&&k.ObjectType=="Promise"?k.then(_=>{this.results[h]||(this.results[h]={}),this.results[h][f]=k,w()}).catch(_=>{S(_)}):(this.results[h][f]=k,w())}catch(k){console.log(k),S(k)}}))}}else this.logger&&console.info(`no subscriber for (${f}) event of (${h}) component`),this.results[h][f]=c;return Promise.all(g).then(()=>{c=null})})};re.prototype.registerSubscribe=function(e){return new Promise((i,r)=>{for(component in e)if(e.hasOwnProperty(component))if(!this.subscribe[component])this.subscribe[component]={};else continue;i()}).then(()=>{let i={};for(component in e)if(e.hasOwnProperty(component)){let r=e[component];for(let t in r)if(r.hasOwnProperty(t)){let n=r[t];for(let s=0;s<n.length;s++){let a=n[s];i[component]||(i[component]={}),i[component][a.original]||(i[component][a.original]=[]),i[component][a.original].push(a),this.stat.subscribe[a.original]=0}}}return i}).then(i=>{for(let r in i)if(i.hasOwnProperty(r)){this.subscribe[r]||(this.subscribe[r]={});for(let t in i[r])if(i[r].hasOwnProperty(t))for(let n of i[r][t])this.subscribe[r][n.original]||(this.subscribe[r][n.original]=[]),this.subscribe[r][n.original].push(n)}i={}})};re.prototype.registerHandlers=function(e,i){this.handlers[i]||(this.handlers[i]={});for(let r in e)if(e.hasOwnProperty(r)){let t=e[r];this.handlers[i][r]=t,this.stat.handlers[t.original]=0}};Ee.exports=re});var W=A((di,Te)=>{function Z(e,i,r){this.data=e,this.template=i,this.isConvert=r}Z.prototype._getTag=function(e){return e.match(new RegExp("(?<=<)|([^/s]+)(?=>)","g"))[2]};Z.prototype._bindReplace=function(e,i){for(let r in e)if(e.hasOwnProperty(r)){let t=new RegExp(`{{${r}}}`,"g");t&&(i=i.replace(t,`${e[r]}`))}return i};Z.prototype._toElement=function(e,i){let r=document.createElement("template");return r.innerHTML=e,r.content.children[0]};Z.prototype.createElement=function(){let e=this.template,i=this.data,r=this.isConvert;if(i){if(i instanceof Array){let t=typeof e=="string",n=t?this._getTag(e):e.tagName;e=t?e:e.outerHTML;let s=[];for(let a=0;a<i.length;a++){let u=i[a],h=this._bindReplace(u,e),f=this._toElement(h,n);r&&(f=f.outerHTML),s.push(f)}return s}else if(i instanceof Object){let t=typeof e=="string",n=t?this._getTag(e):e.tagName;e=t?e:e.outerHTML;let s=this._bindReplace(i,e),a=this._toElement(s,n);return r&&(a=a.outerHTML),a}}else{let n=typeof e=="string"?this._getTag(e):e.tagName;return this._toElement(e,n)}};Te.exports=Z});var he=A((gi,Ce)=>{Ce.exports=class{constructor(e=[],i){this.html=i||document,this.cf=e,this.duration=300}animate(e){return this.config=this.parse(this.cf),new Promise(i=>{for(let r=0;r<this.config.length;r++){let t=this.config[r],{element:n}=t;if(!t[e]){i();break}let s=t[e];if(!s.options&&!(s.options&&s.options.duration)&&(s.options={duration:this.duration}),!s.keyframes&&!n)continue;let a=s.keyframes,u=0,h=[];for(let p=0;p<a.length;p++){let d=a[p];switch(!0){case typeof d=="string":h.push(this.dic(d));break;case d instanceof Object:{let{name:m,offset:c}=d;if(m&&c){let g=this.dic(m);g[g.length-1].offset=c,h.push(g)}else h.push(d)}}}a=h,h=null;let f=()=>{let p=a[u],d=n.animate(p,s.options||this.duration);d.finished?d.finished.then(()=>{u<a.length-1?(u+=1,f()):(a=[],i())}):d.onfinish=()=>{u<a.length-1?(u+=1,f()):(a=[],i())}};f()}})}parse(e){let i=[],r=e.length,t=-1;for(;++t<r;){let n=e[t],s=n.selector,a;switch(!0){case!!(s.val&&s.attr):a=this.html.querySelectorIncluded(`[${s.attr}=${s.val}]`,s.attr,s.val);break;case!!(s.val&&!s.attr):{let u=s.val.match(new RegExp("^[.]"))?"class":s.val.match(new RegExp("^[#]"))?"id":null,h=u?s.val.slice(1):null;a=this.html.querySelectorIncluded(s.val,u,h)}break}n.element=a,i.push(n)}return i}dic(e){return{slideOutUp:[{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1",easing:"ease-out"},{transform:"translate3d(0,100%,0)",visibility:"hidden",opacity:"0",easing:"ease-out"}],slideOutRight:[{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1"},{transform:"translate3d(100%,0,0)",visibility:"hidden",opacity:"0"}],slideOutLeft:[{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1"},{transform:"translate3d(-100%,0,0)",visibility:"hidden",opacity:"0"}],slideOutDown:[{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1",easing:"ease-out"},{transform:"translate3d(0,-100%,0)",visibility:"hidden",opacity:"0",easing:"ease-out"}],slideInUp:[{transform:"translate3d(0,100%,0)",visibility:"hidden",opacity:"0",easing:"ease-out"},{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1",easing:"ease"}],slideInRight:[{transform:"translate3d(100%,0,0)",visibility:"hidden",opacity:"0"},{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1"}],slideInLeft:[{transform:"translate3d(-100%,0,0)",visibility:"hidden",opacity:"0",easing:"ease-out"},{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1"}],slideInDown:[{transform:"translate3d(0,-100%,0)",visibility:"hidden",opacity:"0",easing:"ease-out"},{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1",easing:"ease-out"}],disappear:[{opacity:"1"},{opacity:"0"}],appear:[{opacity:"0"},{opacity:"1"}],flipInX:[,{offset:0,backfaceVisibility:"visible"},{transform:"perspective(400px) rotate3d(1,0,0,90deg)",opacity:"0",offset:0},{transform:"perspective(400px) rotate3d(1,0,0,-20deg)",offset:.4,easing:"ease-in"},{offset:.6,opacity:"1",transform:"perspective(400px) rotate3d(1,0,0,10deg)"},{transform:"perspective(400px) rotate3d(1,0,0,-5deg)",offset:.8},{offset:1,backfaceVisibility:"visible",transform:"perspective(400px) rotate3d(1,0,0,0)"}]}[e.trim()]||[]}}});var Y=A((mi,qe)=>{var ht=B();qe.exports=function(){function e(c){return c?c.constructor.name.toLowerCase():null}function i(c,g){for(let y in c)c.hasOwnProperty(y)&&g(c[y],y)}function r(c,g,y){c=Object.assign(c,{[y]:g})}function t(c){return c===null}function n(c){return c===void 0}function s(c){return e(c)=="array"}function a(c){return e(c)=="object"}var u=function(c,g){for(var y=null,b=0;b<c.length;b++){var v=c[b];if(e(g)=="object"){var w=g,S=Object.keys(g)[0],k=w[S];if(e(v)=="object"){var _=v[S]==k;if(_){y=b;break}}}else if(e(g)!="array"){var _=g==v;if(_){y=b;break}}}return y},h=function(c,g){var y=null,b=e(g);if(b=="object"){var v=Object.keys(g)[0];c[y]!=null&&c[y]==g[v]&&(y=v)}else b=="string"&&(y=g);return y},f=function(c,g){var y=null;return e(c)=="array"?y=u(c,g):e(c)=="object"&&(y=h(c,g)),y},p=class{constructor(c,g,y){this.type=c,this.name=`${ht.instanceID()}-${g}`,this.child=y,this.cache={},e(this.child)=="string"&&(this.child=y=="array"?[]:y=="object"?{}:!1)}init(c){return this[this.type]?(this[this.type](c),!0):!1}open(){if(this.type=="session"){var c=JSON.parse(sessionStorage[this.name]);return c[this.name]}else if(this.type=="local"){var c=JSON.parse(localStorage[this.name]);return c[this.name]}else return this.cache[this.name]}close(c){return this.child=c,this.recache(),this.init(!0)}recache(){this.cache[this.name]=this.child}create(){this.cache[this.name]=this.child}array(){this.create()}object(c){this.create()}session(c){c||this.recache();try{!sessionStorage[this.name]&&!c?sessionStorage.setItem(this.name,JSON.stringify(this.cache)):c&&sessionStorage.setItem(this.name,JSON.stringify(this.cache))}catch{this.recache()}}local(c){c||this.recache();try{!localStorage[this.name]&&!c?localStorage.setItem(this.name,JSON.stringify(this.cache)):c&&localStorage.setItem(this.name,JSON.stringify(this.cache))}catch{this.recache()}}},d={create:function(c,g){if(s(c)){let y=new Set(c);e(g)=="array"?g.forEach(b=>{y.add(b)}):y.add(g),c=Array.from(y)}else a(c)&&(a(g)?i(g,function(y,b){c[b]=y}):c[g]=g);return c},createOrUpdate:function(c,g){var y=f(c,g);return e(c)=="array"?t(y)?c.includes(g):c[y]=g:e(c)=="object"&&(t(y)?a(g)?i(g,function(b,v){r(c,b,v)}):c[g]=g:c[y]=g),c},remove:function(c,g){if(e(g)=="string"){var y=f(c,g);if(e(c)=="object")delete c[y];else if(e(c)=="array"){for(var b=[],v=0;v<c.length;v++)if(v!=y)b.push(c[v]);else continue;c=b}return c}else{if(e(g)=="object")return Object.filter(c,function(w,S){var k=g[S]!=null&&g[S]==w;return!k});if(e(g)=="array")return Object.filter(c,function(w,S){var k=g.contains(S);return!k})}if(t(y))return!1},get:function(c,g){var y=e(g);if(y=="string"){var b=f(c,g);if(b==0||b)return c[b]}else{if(y=="object")return Object.filter(c,function(v,w){var S=!n(g[w])&&g[w]==v;return S});if(y=="array")return Object.filter(c,function(v,w){var S=g.contains(w);return S})}return null},getNot:function(c,g){var y=e(g);return y=="string"?Object.filter(c,function(b,v){var w=v!=g;return w}):y=="object"?Object.filter(c,function(b,v){return Object.some(g,function(w,S){var k=S==v&&w==b;return!k})}):y=="array"?Object.filter(c,function(b,v){var w=!g.contains(v);return w}):null},getAll:function(c){return c}},m=class{constructor(c){this.name=c.name,this.storageType=c.storage,this.child=c.child||"object";try{e(this.child)=="string"&&(this.child=this.child=="array"?[]:this.child=="object"?{}:null)}catch{this.storageType=="session"?sessionStorage.clear():this.storageType=="local"&&localStorage.clear(),e(this.child)=="string"&&(this.child=this.child=="array"?[]:this.child=="object"?{}:null)}if(!["array","object"].includes(e(this.child)))throw new Error("the child must be an object or array type.");this.storage=new p(this.storageType,this.name,this.child),this.storage.init()}has(c){var g=this.storage.open(),y=f(g,c);return t(y)?!1:y}get(c,g){if(g){var y=this.storage.open();return d.get(y,c)}else return new Promise((b,v)=>{setTimeout(()=>{var w=this.storage.open();b(w)})}).then(b=>d.get(b,c))}getNot(c){var g=this.storage.open();return d.getNot(g,c)}getAll(){var c=this.storage.open();return Promise.resolve(c)}update(c,g){var y=this.storage.open(),b=f(y,c);return b==0||b?(y=d.createOrUpdate(y,data),this.storage.close(y)):!1}createOrUpdate(c){if(arguments.length>1){let b=arguments[0],v=arguments[1];c={[b]:v}}var g=this.storage.open();return g=d.createOrUpdate(g,c),this.storage.close(g)}create(c){var g=this.storage.open();return g=d.create(g,c),this.storage.close(g)}remove(c){var g=this.storage.open();return g=d.remove(g,c),this.storage.close(g)}};return m}});var ue=A((yi,Ae)=>{var ut=Y()();Ae.exports=class{constructor(){this.storage=new ut({child:"array",storage:"session",name:"_cake_persistent"})}listen(e){let i="DOMContentLoaded";"deviceready"in document&&(i="deviceready"),window.addEventListener(i,r=>{setTimeout(()=>{this.storage.getAll().then(t=>{if(!!(t&&!t.length))for(let n=0;n<t.length;n++){let s=t[n],a=e[s];a.isConnected=!1,a?!a.isConnected&&a.render.bind(a)():console.error(`component ${a} is not found!`)}})})})}append(e){this.storage.create(e)}remove(e){this.storage.remove(e)}}});var fe=A((bi,Le)=>{Le.exports=class{constructor(e){this.Components=e}listen(){window.addEventListener("hashchange",e=>{let i=this.compare(e);this.find(i,this.notify)})}compare(e){let{oldURL:i,newURL:r}=e,t=null;if(i.length>r.length){let n=new URL(i).hash.substring(1).split("/"),s=new URL(r).hash.substring(1).split("/");for(let a=0;a<n.length;a++)if(!s.includes(n[a])){t=n[a];break}}return t}find(e,i){if(!!e)if(this.Components[e])this.Components[e].isConnected&&i(this.Components[e]);else{let r=setInterval(()=>{this.Components[e]&&(this.Components[e].isConnected&&i(this.Components[e]),clearTimeout(r))},50);setTimeout(()=>{clearTimeout(r)},5e3)}}notify(e){e.fire.destroy()}add(e){let i=location.hash;i.includes(e)||(location.hash=i+"/"+e)}remove(e){let r=location.hash.replace(e,"");location.replace(r)}}});var pe=A((vi,je)=>{je.exports=function(e){class i{constructor(n){this.type=n,this.storage={}}store(n,s){this.storage[n]=s}get options(){if(this.type=="select"||this.type=="virtual"){let n={};for(let s in this.storage){let a=this.storage[s];n[s]=a.options}return n}return!1}get value(){if(this.type=="input"){let n="";for(let s in this.storage)n=this.storage[s].options[0];return n}return!1}get query(){let n={};for(let s in this.storage)n=this.storage[s].query[0]||null;return n}get has(){let n="";for(let s in this.storage)n=this.storage[s].query[0]||null;return n}}let r={};return r.options=t=>{let{options:n,params:s}=t;n||(n=[]);let a=n.length>1;return Promise.all(n.map(h=>{let{control:f,field:p,tbl:d,src:m,schema:c,type:g}=h;return e.fire(m,{tbl:d,field:p,params:s}).then(y=>{if(y=y||[],h.query=y,y=y.map(b=>c(b)),g!="input"){let b=c({});for(let v in b)b.hasOwnProperty(v)&&(b[v]="");y.unshift(b)}return h.options=y,h}).then(y=>{let{type:b,control:v}=y;b||(b="others");let w=new i(b);if(a){let S={};return S[v]||(S[v]=w,S[v].store(v,y)),S}else return w.store(v,y),w})})).then(h=>a?h.reduce((f,p)=>(Object.assign(f,p),f),{}):h[0]).catch(h=>{console.error(h)})},r.plot=t=>{let{data:n,container:s}=t;if(!n&&!s)return;let a=(u,h,f)=>{if(!u){console.info("root is not provided!");return}let p=u.querySelectorAll(`${h}`),d=p.length;if(!d){f(null,n);return}for(let m=0;m<d;m++){let c=p[m],g=c.name,y=n[g],b=f(c,y,m);if(b=="break")break;b!="continue"}};return a(s,"INPUT.input",function(u,h){h!=null&&(u.type=="date"&&(h=new Date(h)=="Invalid Date"?"":new Date(h).toJSON().split("T")[0]),u.value=h)}),setTimeout(()=>{a(s,"SELECT.input:not(.cake-template)",function(u,h){a(u,"OPTION:not(.cake-template)",function(f,p,d){if(f){if(f.value==h)return u.selectedIndex=d,"break"}else console.log(f,p,"provide schema")})})},500),Promise.resolve()},r}});var de=A((wi,Ie)=>{var ft=Y()();Ie.exports=function(e){let i={};class r{constructor(n){this.name=n,this.reactiveData={},this.notify=[],this.install(this.name),this.pKeys={},this.sanitize=function(s){let a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"},u=/[&<>"'/]/ig;return typeof s=="string"?s.replace(u,h=>a[h]||""):s}}registerNotifier(n){this.notify.push(n)}install(){this.session=new ft({child:"object",storage:"session",name:`_cake_${this.name}_cf`})}notifier(n,s){let{value:a,bind:u}=s;return this.reactiveData[n]||(this.reactiveData[n]={}),this.reactiveData[n][u]=a,this.set(u,a)}getInputData(n="json",s){let a=s||this.name,u=JSON.parse(JSON.stringify(this.reactiveData[a]));for(let h in u){let f=u[h];u[h]=this.sanitize(f)}if(n=="json")return u;if(n=="formdata"){let h=new FormData;for(let f in u){let p=u[f];h.append(f,p)}return h}}hook(n,s,a){i[n]||(i[n]={}),i[n][s]||(i[n][s]=[]),i[n][s].push(a)}get(n,s=!1){let a=this.pKeys[n];return s?this.session.get(n,!0):this.session.get(n)}set(n,s){let a=`${this.name}-${n}`,u=this.notify,h=this.name,f=null;return this.pKeys[n]=a,new Promise(async(p,d)=>{n!="password"&&this.session.createOrUpdate(n,s),p()}).then(async()=>{let p=i[this.name];if(p){let d=p[n];d&&d.forEach(m=>{m(s)})}return Promise.all(u.map(d=>d(n,s,f,h).then(()=>{})))})}}return r}});var ge=A((Si,Ne)=>{var ne=B(),pt=Y()(),se=new pt({child:"object",storage:"local",name:"_cake_router_cf"});Ne.exports=function(e,i){let r=[];return class{constructor(t,n){this.unauthRoute=n&&n["401"]||null,this.authRoute={},this.route=this.compile(t),this.prev=null,this.components=e,this.watch(),this.persist(),Object.defineProperty(i.prototype,"$router",{configurable:!0,get:()=>({goTo:this.goTo.bind(this),goBack:this.goBack.bind(this),auth:this.auth.bind(this),logout:this.logout.bind(this),...this.prev}),set(s){}})}authenticate(t){if(this.unauthRoute)try{let n=se.get("role",!0);if(n){if(t){let{role:s,data:a}=n,u=this.authRoute[s];if(u){let{name:h}=u;this.goTo(h)}}}else t||this.logout()}catch{t||this.logout()}}auth(t){if(t){let{role:n,token:s,data:a}=t;se.createOrUpdate("role",{role:n,token:s,data:a})}else{let n=se.get("role",!0);if(n){let s={};return n&&(s=n),s.data&&(s=s.data),s.user&&(s=s.user),s.token=n.token,s}else return"token"}}logout(){try{se.remove("role")}catch{}this.goTo(this.unauthRoute,{replace:!0})}goTo(t,n){try{let a=this.route,{params:u={},replace:h}=n||{},f=null,p=Object.entries(a);for(let m=0;m<p.length;m++){let[c,g]=p[m],{name:y}=g;if(y==t){f=c;break}}if(!f)throw new Error(`${t} is not found in routes`);if(f=="/"){h?location.replace(`${location.origin}${location.pathname}`):window.location=`${location.origin}${location.pathname}`;return}let d;if(f=f.slice(1),u.toString().includes("Object")){let m="";for(let c in u)m+=`${c}=${u[c]}&`;u=m,d=`!/${f}?${u}`}else d=`!/${f}`;if(f=="/"&&(d=""),h){let m=`${location.origin}${location.pathname}#${d}`;ne.isChrome()&&!ne.isFirefox()&&history.replaceState(void 0,void 0,m),location.replace(m)}else{var s=document.createElement("a");s.href=`#${d}`,ne.isChrome()&&!ne.isFirefox()&&history.pushState(void 0,void 0,s.href),s.click()}}catch(a){console.log(a)}}goBack(){return new Promise((t,n)=>{window.history.back(),t()})}persist(){if(!document.hasRouterPersist){let t="DOMContentLoaded";"deviceready"in document&&(t="deviceready"),document.addEventListener(t,n=>{this.parse(),this.notify().then(()=>this.navigate(!0))}),document.hasRouterPersist=!0}}watch(){window.hasRouterPop?this.parse():(window.addEventListener("popstate",t=>{this.parse(),this.notify().then(()=>(console.log("notified"),this.clear().then(()=>(console.log("cleared"),this.navigate().then(()=>{console.log("navigated")})))))}),window.hasRouterPop=!0)}compile(t){let n={};for(let s in t){let a=t[s];s=String(s);let u=s.length,h=s;if(["404"].includes(s)){let p=t[s];t[s]={callback:p,name:s}}else h=h.slice(1);h=h.split("/"),h=h.map((p,d)=>{let m=p.includes(":"),c="";if(d==0?c+="^/":c+="/",m?c+="(([^/#?]+?))":c+=p,d==u-1?c+="/?$":c+="",m){let g=p.replace(":","");n[s]||(n[s]={}),n[s].params={[g]:d}}return c}),n[s]&&n[s].params?n[s]={params:n[s].params,regex:new RegExp(h.join("")),...a}:n[s]={regex:new RegExp(h.join("")),...a};let{auth:f}=a;if(f){if(this.authRoute[f])throw new Error(`auth ${f} is found in other route`);this.authRoute[f]=a}}return n.length=Object.keys(t).length,n.keys=Object.keys(t),n}parse(){let t=window.location.hash,n,s;if(t?(n=t.includes("#!/")?2:t.includes("#/")?1:null,t=t.slice(n)):(t="/",n=!0),!n)return;let a=new URL(`http://localhost${t}`),{search:u,pathname:h}=a,f=this.route.keys,p={};u&&new URLSearchParams(u).forEach((m,c)=>{p[c]=m});let d=!1;for(let m=0;m<f.length;m++){let c=this.route[f[m]],{regex:g,components:y,params:b,name:v,overlay:w,display:S,onrender:k}=c;if(b){let E=String(h);E=E.slice(1),E=E.split("/"),Object.entries(b).forEach(C=>{let[j,P]=C;E[P]&&(p[j]=E[P])})}if(g.test(h)){s=v,this.unauthRoute!=v?this.authenticate():this.authenticate(!0),this.prev={components:y,state:p,path:h,name:v,prev:this.prev,overlay:w,display:S,onrender:k},d=!0;break}}if(!d&&this.route["404"]){let m=this.route["404"].callback(),{origin:c,pathname:g}=location;this.route[m]?(m=="/"?m=`${c}${g}`:g.slice(-1)=="/"?m=`${c}${g}#!${m}`:m=`${c}${g}/#!${m}`,location.replace(m)):!!m&&!this.route[m]&&(c.slice(-1)=="/"&&m[0]=="/"&&(m=m.slice(1)),m=`${c}${m}`,location.replace(m))}}navigate(t){if(this.prev){let{components:n,state:s,path:a,name:u,overlay:h,onrender:f={}}=this.prev;try{if(n.length)return new Promise((p,d)=>{let m=n.length,c=0;if(m){let g=()=>{let y=n[c];if(n.length>c){let b=y;y=this.components[y],y.render({emit:{route:this.prev},...f[b]||{}}).then(()=>{y.await.isConnected?y.await.isConnected&&y.await.isConnected.then(()=>{g()}):g()}).catch(v=>{throw v}),c+=1}else p()};g()}else p()})}catch(p){throw console.log(p),new Error(`some of the component in ${JSON.stringify(n)} in path ${a} of router is not found, make sure the it is created`)}}}static pushState(t,n,s){window.history.pushState(t,n,s);let a=Promise.resolve();if(this.prev){let{components:u,state:h,path:f,name:p}=this.prev;a=new Promise((d,m)=>{let c=e.length,g=0;if(c){let y=()=>{let b=e[g];e.length>g?(b=this.components[b],b.fire.destroy(),b.await.destroy.then(()=>{y()})):d(),g+=1};y()}else d()})}return a.then(()=>this.navigate())}clear(){let t=Promise.resolve(),{overlay:n}=this.prev||{};if(n)return t;let s=function(a,u,h,f){let p=u[a],d=p,m=s;try{if(u.length>a){if(p=h[p],!p.fire.destroy)throw new Error(`${d} has no destroy handler!`);p.fire.destroy(),p.await.destroy.then(()=>{m(a,u,h,f)})}else f();a+=1}catch(c){throw c}};if(this.prev&&this.prev.prev){let{components:a,state:u,path:h,name:f,overlay:p}=this.prev.prev,d=Promise.resolve();return p&&(d=new Promise((m,c)=>{let g=this.prev.components;g.length?s(0,g,this.components,m):m()})),t=new Promise((m,c)=>{a.length?s(0,a,this.components,m):m()}),d.then(()=>t)}return t}pushState(t,n,s){window.history.pushState(t,n,s);let a=Promise.resolve();return this.clear(),a.then(()=>this.navigate())}static subscribe(t){t&&t.constructor.name=="Function"&&r.push(t)}notify(){return Promise.all(r.map(t=>t()))}}}});var F=A(le=>{le.getConfig=function(e,i,r,t,n,s){return t==null?[]:t==n&&i!="bind"?[]:(()=>{let a=[],u=e[s]&&e[s][i]||[];if(u&&u.length)for(let h=0;h<u.length;h++){let f=u[h];f.bind==r&&a.push({...f,component:s})}return a})()};le.updateConfig=function(h,i,r,t,n,s,a,u){if(t!=null&&!(t==n&&i!="bind")){var h=(()=>{let f=h[s]&&h[s][i];if(f&&f.length){let p=[];for(let d=0;d<f.length;d++){let m=f[d];m.bind==r&&(u?m.sel==u:!0)&&Object.assign(m,a)}return p}else return[]})();return h}};le.extendConfig=function(e){let i=[];for(let r=0;r<e.length;r++){let t={},n=e[r];for(let s in n)t[s]=n[s];i.push(t)}return i.reduce((r,t)=>{let{incrementedSels:n}=t;return n&&n.length?n.forEach(s=>{let a={...t};a.incrementedSel=s,r.push(a)}):r.push(t),r},[])}});var Re=A((_i,xe)=>{var V=B(),{getConfig:dt,updateConfig:Oi,extendConfig:gt}=F();xe.exports=function(e){return async function(i,r,t,n,s){s=s||document;let a=dt(e,"attr",i,r,t,n);if(!!a.length)return a=gt(a),Promise.all(a.map(u=>{let h,{hasNegate:f,bind:p,testVal:d,attr:m,ops:c,sel:g,attrkey:y,attrvalue:b,incrementedSel:v,incrementId:w}=u;if(p=V.removeWhiteSpace(p),m=V.removeWhiteSpace(m),v=r.incrementedSel||v,r.incrementedSel?h=r[p]:h=r,i==p){let S=s.querySelectorAll(`[data-attr=${v||g}]:not(.cake-template)`);return Promise.all([...S].map(k=>{let _=!1;return c?(_=V.logTest(h,c,d),f&&(_=!_)):f?_=!h:_=!!h,_?new Promise((E,C)=>{V.timeOut(()=>{b?k.setAttribute(y,!0):k.setAttribute(y),E()},100)}):new Promise((E,C)=>{k.hasAttribute(y)?V.timeOut(()=>{k.removeAttribute(y),E()},100):E()})}))}}))}}});var Be=A(($i,Ue)=>{var me=B(),{getConfig:mt,updateConfig:Pi,extendConfig:yt}=F();Ue.exports=function(e){return async function(i,r,t,n,s){s=s||document;let a=mt(e,"bind",i,r,t,n);if(!!a.length){a=yt(a);for(let u=0;u<a.length;u++){let h=a[u],f,{attr:p,bind:d,sel:m,incrementedSel:c,incrementId:g,incrementedSels:y}=h;c=r.incrementedSel||c,r.incrementedSel?f=r[d]:f=r;let b=p.toHyphen();if(i==d){let v=s.querySelectorAll(`[data-bind=${c||m}]`);for(let w=0;w<v.length;w++){let S=v[w];p=="class"||p=="className"?S.classList.length?(me.splitBySpace(t,function(k){S.classList.remove(k)}),me.splitBySpace(f,function(k){S.classList.add(k)})):me.splitBySpace(f,function(k){S.classList.add(k)}):(f!=null||f!=null)&&(S.setAttribute(b,f),S[p]=f)}}}}}}});var Me=A((Ti,He)=>{var Q=B(),{getConfig:bt,updateConfig:Ei,extendConfig:vt}=F();He.exports=function(e){return async function(i,r,t,n,s){s=s||document;let a=bt(e,"class",i,r,t,n);if(!a.length)return;let u={};a=vt(a);for(let h=0;h<a.length;h++){let f=a[h],p,{hasNegate:d,bind:m,testVal:c,className:g,ops:y,sel:b,incrementedSel:v,incrementId:w}=f;if(m=Q.removeWhiteSpace(m),v=r.incrementedSel||v,r.incrementedSel?p=r[m]:p=r,i==m){u[v||b]||(u[v||b]=s.querySelectorAll(`[data-class=${v||b}]:not(.cake-template)`));let S=u[v||b];for(let k=0;k<S.length;k++){let _=S[k],E=!1;y?(E=Q.logTest(p,y,c),d&&(E=!E)):d?E=p==c:E=!!p,E?Q.splitBySpace(g,function(C){Q.toArray(_.classList).includes(C)||setTimeout(()=>{_.classList.add(C)})}):Q.splitBySpace(g,function(C){Q.toArray(_.classList).includes(C)&&setTimeout(()=>{_.classList.remove(C)})})}}}}}});var De=A((Ci,Fe)=>{var wt=W();Fe.exports=function(e){return async function(i){let{vItems:r,configs:t,newValue:n}=i,s=[];for(let a=0;a<t.length;a++){let u=t[a],h=u.children;if(!!h)for(let f=0;f<h.length;f++){let p=h[f];if(!e[u.component])continue;let d=e[u.component].for.find(m=>m.sel==p);d&&s.push(new Promise(m=>{let{bind:c,sel:g,iter:y,ins:b}=d;setTimeout(()=>{let v=document.querySelectorAll(`[data-for=${g}-active]`);for(let w=0;w<v.length;w++){let S=v[w],k=S.dataset.forAutoBindKey,_=S.dataset.forAutoBindValue,E=n.find(P=>P[k]==_),C=c.split(".")[c.split(".").length-1],j=E[C].length&&E[C].map(P=>P instanceof Object?P:{[y]:P});if(j)for(let P=0;P<j.length;P++){let R=j[P],I=S.cloneNode(!0),q=new wt(R,I,!1).createElement();q.style.removeProperty("display"),q.classList.remove("cake-template"),q.removeAttribute("data-for-template"),S.insertAdjacentElement("beforebegin",q)}S.parentElement.tagName=="SELECT"&&(S.parentElement.selectedIndex=0)}m()})}))}}return Promise.all(s)}}});var We=A((Li,Je)=>{var qi=B(),St=ie(),kt=W(),{getConfig:Ot,updateConfig:_t,extendConfig:Ai}=F();Je.exports=function({st:e,logicalType:i}){return async function(r,t,n,s,a){a=a||document;let u=Ot(e,"forUpdate",r,t,n,s);if(!u.length)return;let h=[];for(let f=0;f<u.length;f++){let{bind:p,sel:d,iter:m,ins:c,targets:g}=u[f];for(let y in t)if(t.hasOwnProperty(y)){let b=document.querySelectorAll(`[data-for-update-bind=${y}]`);for(let v=0;v<b.length;v++){let w=b[v],S=w.dataset.forUpdateBind;if(!w.dataset.forTemplate)w.remove();else{let k=w.cloneNode(!0);k.style.removeProperty("display"),k.classList.remove("cake-template");let _=t[S],E=-1;for(l=_.length;++E<l;){let C=_[E],j=E;for(let R=0;R<i.length;R++){let I=i[R],q=new St(w).querySelectorAllIncluded(`[data-${I}]`);for(let N=0;N<q.length;N++){let U=q[N];if(U.dataset[I]){let H=U.dataset[I],M=`${H}-${j}`;k.dataset[I]=M;let{bind:D}=this.getWatchItemsBySel(s,I,H);if(D.includes(".")){S=D.split(".")[0];for(let ee in C){let oe=C[ee],z=`${S}.${ee}`;C[z]=oe}}H&&h.push({_type:I,...C,incrementedSel:M,sel:H,bind:D,incrementId:j,component:s})}}}let P=new kt(C,k,!1).createElement();P.classList.remove("cake-template"),P.removeAttribute("data-for-template"),w.insertAdjacentElement("beforebegin",P),w.parentElement.tagName=="SELECT"&&(w.parentElement.selectedIndex=0)}}}}}return Promise.all(h.map(f=>{let{bind:p,_type:d,component:m,incrementedSel:c,sel:g}=f,y=`notify${d.toProper()}`;return _t(d,p,f,null,m,{incrementedSel:c},g),this[y](p,f,null,m)})).then(()=>{})}}});var Ge=A((xi,Xe)=>{var ji=B(),Ke=W(),{getConfig:ze,updateConfig:Ii,extendConfig:Ni}=F();Xe.exports=function(e){return async function(i,r,t,n,s){return new Promise((a,u)=>{try{let h=ze(e,"for",i,r,t,n),f=ze(e,"switch",i,r,t,n);if(!h.length)return;let p=r.reduce((d,m)=>(d.push(m),d),[]);for(let d=0;d<h.length;d++){let{bind:m,sel:c,iter:g,ins:y,component:b,cleaned:v}=h[d];s=Cake.Components[b].html;let w=s.querySelectorIncluded(`[data-for-template=${c}]`),S=w.cloneNode(!0);p=p.map(k=>{for(let _ in k)k.hasOwnProperty(_)&&(k[`${g}.${_}`]=k[_]);return k}),(()=>{let k=-1;l=p.length,p.forEach((_,E)=>{let C=w.cloneNode(!0);(()=>{if(f&&!f.length)return;let[{bind:R,map:I,sel:q,cases:N}]=f,U=_[I],H=C.querySelector(`[data-switch=${q}]`),M=N.find(K=>K.bind.includes(U)),D=S.querySelector(`[data-case=${q}-${M._id}]`);D.classList.remove("cake-template"),H.innerHTML=D.outerHTML})();let j=new Ke(_,C,!1).createElement();j.style.removeProperty("display"),j.classList.remove("cake-template"),j.removeAttribute("data-for-template"),w.insertAdjacentElement("beforebegin",j),(()=>{let[{children:R}]=h;!R||R.forEach(I=>{let q=j.querySelector(`[data-for=${I}]`);if(q){let N=q.dataset.forAutoBindKey,U=q.dataset.forAutoBindValue,H=q.dataset.forIter,M=_[H];if(M)for(let K=0;K<M.length;K++){let ee=M[K],oe=q.cloneNode(!0),z=new Ke(ee,oe,!1).createElement();z.style.removeProperty("display"),z.classList.remove("cake-template"),z.removeAttribute("data-for-template"),q.insertAdjacentElement("beforebegin",z)}let D=q.closest("SELECT");D&&(D.selectedIndex=0)}})})();let P=j.querySelectorAll("[data-src]");if(P)for(let R=0;R<P.length;R++){let I=P[R];I.src=I.dataset.src,I.removeAttribute("data-src")}}),v&&w.remove(),a()})()}}catch(h){u(h)}})}}});var Qe=A((Ui,Ye)=>{var Pt=B(),{getConfig:$t,updateConfig:Ri,extendConfig:Et}=F();Ye.exports=function(e){return async function(i,r,t,n,s){s=s||document;let a=$t(e,"if",i,r,t,n);if(!a.length)return;a=Et(a);let u={};for(let h=0;h<a.length;h++){let f=a[h],{attr:p,bind:d,sel:m,testval:c,_true:g,_false:y,ops:b,hasNegate:v,incrementedSel:w,incrementId:S}=f,k=p.toHyphen(),_=g!="null",E=y!="null";if(i==d){u[m]||(u[m]=s.querySelectorAll(`[data-if=${w||m}]:not(.cake-template)`));let C=u[m];for(let j=0;j<C.length;j++){let P=C[j],R=r,I;if(c?I=Pt.logTest(c,b,R):I=v?!R:!!R,I){if(_)if(p=="class"){let q=g.split(" ");E?(y.split(" ").forEach(U=>{P.classList.remove(U)}),q.forEach(U=>{P.classList.add(U)})):q.forEach(N=>{P.classList.contains(N)||P.classList.add(N)})}else R[g]&&P.setAttribute(p,R[g])}else if(E)if(p=="class"){let q=y.split(" ");_?(g.split(" ").forEach(U=>{P.classList.remove(U)}),q.forEach(U=>{P.classList.add(U)})):trueClasses.forEach(N=>{P.classList.contains(N)||P.classList.add(N)})}else P.setAttribute(p,y)}}}}}});var Ve=A((Fi,Ze)=>{var Bi=B(),{getConfig:Tt,updateConfig:Hi,extendConfig:Mi}=F();Ze.exports=function(e){return async function(i,r,t,n,s){s=s||document;let a=Tt(e,"input",i,r,t,n);if(!!a.length)for(let u=0;u<a.length;u++){let h=a[u],{attr:f,bind:p,sel:d}=h,m=f.toHyphen();if(i==p){let c=s.querySelectorAll(`[data-input=${d}]`);for(let g=0;g<c.length;g++){let y=c[g];f=="className"?t?r?y.classList.replace(t,r):y.classList.remove(t):y.classList.add(r):(y.setAttribute(m,r),y[f]=r)}}}}}});var it=A((Wi,tt)=>{var Di=B(),Ct=W(),{getConfig:qt,updateConfig:et,extendConfig:Ji}=F();tt.exports=function({st:e,logicalType:i}){return async function(r,t,n,s,a){a=a||document;let u=qt(e,"switch",r,t,n,s);if(!u.length)return;let h=[];for(let f=0;f<u.length;f++){let p=u[f],{bind:d,sel:m,map:c,cases:g}=p,y=a.querySelectorAll(`[data-switch-slot=${m}]`);for(let b=0;b<t.length;b++){let v=b,w=t[b],S=y[b],k=S.dataset.index,_=w[c];if(_!=null){let E=null;for(let C=0;C<g.length;C++)if(g[C].bind.split("|").includes(_)){E=g[C];break}if(E){let{_id:C,bind:j}=E,P=document.querySelector(`[data-case=${m}-${C}]`);if(P&&P.toString().includes("Element")){P=P.cloneNode(!0);let R=P.querySelectorAll("[data-for-auto=true]");for(let q=0;q<R.length;q++){let N=R[q];N.dataset.for=`${N.dataset.for}-active`}P.removeAttribute("data-case");let I=new Ct(w,P,!1).createElement();for(let q=0;q<i.length;q++){let N=i[q];if(P.dataset[N]){let U=P.dataset[N],H=`${U}-${v}`;I.dataset[N]=H;let{bind:M}=this.getWatchItemsBySel(s,N,U);U&&h.push({_type:N,...w,incrementedSel:H,sel:U,component:s,bind:M,incrementId:v})}}I.classList.remove("cake-template"),S.replaceWith(I)}}}}}return Promise.all(h.map(f=>{let{bind:p,_type:d,component:m,incrementedSel:c,sel:g}=f,y=`notify${d.toProper()}`;return et(e,d,p,f,null,m,{incrementedSel:c},g),this[y](p,f)})).then(()=>{let f=h.reduce((p,d)=>{let{sel:m,incrementedSel:c,bind:g}=d;return p[m]||(p[m]={data:d,incrementedSels:[]}),p[m].incrementedSels.push(c),p},{});for(let p in f)if(f.hasOwnProperty(p)){let d=f[p],{data:m,incrementedSels:c}=d,{_type:g,bind:y,component:b,sel:v}=m;et(e,g,y,m,null,b,{incrementedSels:c},v)}})}}});var nt=A((Xi,rt)=>{var Ki=B(),{getConfig:At,updateConfig:zi,extendConfig:Lt}=F();rt.exports=function(e){return async function(i,r,t,n,s){s=s||document;let a=At(e,"toggle",i,r,t);if(!!a){a=Lt(a),s=s||document;for(let u=0;u<a.length;u++){let h=a[u];if(!h)continue;let{sel:f,bind:p,value:d,ops:m}=h,c=s.querySelector(`[data-toggle=${f}]`);d==t&&c&&c.classList.remove("is-active"),d==r&&c&&(c.classList.contains("is-active")&&c.classList.remove("is-active"),c&&c.classList.add("is-active"))}}}}});var ye=A((Gi,lt)=>{var jt=B(),It=Re(),Nt=Be(),xt=Me(),Rt=De(),Ut=We(),Bt=Ge(),Ht=Qe(),Mt=Ve(),Ft=it(),Dt=nt(),L={},st=["if","bind","switch","toggle","class","attr"];function T(){this.uiid=0,this.notify={}}T.prototype.notifyFor=Bt(L);T.prototype.notifySwitch=Ft({st:L,logicalType:st});T.prototype.notifyForAuto=Rt(L);T.prototype.notifyForUpdate=Ut({st:L,logicalType:st});T.prototype.notifyClass=xt(L);T.prototype.notifyBind=Nt(L);T.prototype.notifyAttr=It(L);T.prototype.notifyIf=Ht(L);T.prototype.notifyInput=Mt(L);T.prototype.notifyToggle=Dt(L);T.prototype.notifier=function(e,i,r,t){let n=JSON.parse(JSON.stringify(i));jt.isObject(n)&&(n=JSON.parse(JSON.stringify(i)));let s={for:"For",forUpdate:"ForUpdate",toggle:"Toggle",bind:"Bind",input:"Input",if:"If",class:"Class",attr:"Attr"},a=Object.caching("AttribProp").get(e)||(()=>{let u={},h=Object.keys(s),f=L[t];if(!f)return[];for(let p=0;p<h.length;p++){let d=h[p],m=f[d];if(m)for(let c=0;c<m.length;c++){let g=m[c],{bind:y}=g;y==e&&(u[d]=!0)}}return u=Object.keys(u),Object.caching("AttribProp").set(e,u),u})();return new Promise((u,h)=>{try{let f=a.length,p=0,d=()=>{if(f>p){let m=a[p],c=s[m];p+=1,this[`notify${c}`](e,n,r,t).then(()=>{d()})}else u()};d()}catch(f){h(f.message)}})};T.prototype.registerNotifier=function(e,i){this.notify[e]||(this.notify[e]=[]),this.notify[e].push(i)};T.prototype.getEventTarget=function(e){let i=`${e}`,r=Object.caching("getEventTarget").get(i);if(!r){let t=L[e];r=t&&t.evt?t.evt:[],Object.caching("getEventTarget").set(i,r)}return r};T.prototype.getRouterTarget=function(e){let i=`${e}`,r=Object.caching("getRouterTarget").get(i);if(!r){let t=L[e];r=t&&t.router?t.router:[],Object.caching("getRouterTarget").set(i,r)}return r};T.prototype.getWatchItems=function(e){let i=`${e}`,r=Object.caching("getWatchItems").get(i);if(!r){let t=L[e]||{},n=new Set;for(let s in t)if(t.hasOwnProperty(s)){let a=t[s];for(let u=0;u<a.length;u++){let h=a[u],{bind:f}=h;if(f)n.add(f);else continue}}r=[...n],Object.caching("getWatchItems").set(i,r)}return r};T.prototype.getConfig=function(e){return L[e]};T.prototype.getWatchItemsByType=function(e,i){let r=`${e}-${i}`,t=Object.caching("getWatchItemsByType").get(r);if(!t){let s=(L[e]||{})[i]||[],a=new Set;for(let u=0;u<s.length;u++){let h=s[u],{bind:f}=h;switch(!!f){case!0:a.add(f);break;default:switch(!0){case(i=="animate"||i=="toggle"):(a.constructor.name="Set")&&(a=[]),a.push(h)}}}t=[...a],Object.caching("getWatchItemsByType").set(r,t)}return t};T.prototype.getWatchItemsBySel=function(e,i,r){let t=`${e}-${i}-${r}`,n=Object.caching("watchItemsBySel").get(t);if(!n){let a=L[e][i].find(u=>u.sel==r);n=a||!1,Object.caching("watchItemsBySel").set(t,n)}return n};T.prototype._activateReactive=e=>{};T.prototype._register=function(e,i,r,t){switch(!0){case!e[i]:e[i]={};case!e[i][r]:e[i][r]=[];default:e[i][r].push(t);break}};T.prototype._static=function(e){return function(i,r){let t=[];for(let n=0;n<i.length;n++){let s=i[n];switch(r){case!1:t.push(s);break;case!0:{let a=s.closest("[data-component]");switch(a=a&&a.dataset.component,a==e){case!0:t.push(s);break}}break;default:continue}}return t}};T.prototype._compileEvents=function(e,i,r){return new Promise(t=>{if(!e.length){t();return}let n=this._static(i)(e,r);if(!n.length){t();return}for(let s=0;s<n.length;s++){let a=`cke${this.uiid}`,u=n[s],h=u.dataset.event.split(" ").join("").split(",");for(let f=0;f<h.length;f++){let[p,d]=h[f].split(":");this._register(L,i,"evt",{event:p,sel:a,cb:d}),u.dataset.event=a,this.uiid++}}t()})};T.prototype._compileToggle=function(e,i,r){return new Promise(t=>{if(!e.length){t();return}if(!this._static(i)(e,r).length){t();return}let s={};for(let a=0;a<e.length;a++){let u=`ckt${this.uiid}`,h=e[a],f=h.dataset.toggle;s[f]&&(u=s[f]),this._register(L,i,"toggle",{sel:u,name:"ns-"+f}),h.dataset.toggle=u,this.uiid++,s[f]=u}s={},t()})};T.prototype._compileFor=function(e,i,r,t){return new Promise(n=>{let s=t;if(!e.length){n();return}let a=this._static(i)(e,r);if(!a.length){n();return}let u={};for(let h=0;h<a.length;h++){let f=`ckf${this.uiid}`;u[f]={};let p=a[h],d=p.dataset.for,m=p.dataset.forAutoBind,c=p.dataset.forCleaned=="true",[g,y,b]=d.split(" ");if(m){let v=p.dataset.forIter,w=m.split(":"),S=w[0]&&w[0].trim(),k=w[1]&&w[1].trim();u[f]={iteration:v},p.dataset.forAutoBindKey=S,p.dataset.forAutoBindValue=k,p.removeAttribute("data-for-auto-bind")}if(p.style.display="none",p.classList.add("cake-template"),p.dataset.for=f,p.dataset.forTemplate=f,u[f]=Object.assign(u[f],{bind:b,sel:f,iter:g,ins:y,cleaned:c}),++this.uiid,h!=0){let v=p.parentElement&&p.parentElement.closest("[data-for]");if(!v)continue;let w=!!v.dataset.for;if(s.contains(v)&&w){let S=v.dataset.for,k=u[S];k&&!k.children?k.children=[f]:k&&k.children.push(f)}}}for(let h in u)u.hasOwnProperty(h)&&this._register(L,i,"for",u[h]);n()})};T.prototype._compileForUpdate=function(e,i,r){return new Promise(t=>{if(!e.length){t();return}let n=this._static(i)(e,r);if(!n.length){t();return}for(let s=0;s<n.length;s++){let a=`ckfu${this.uiid}`,u=n[s],h=u.dataset.forUpdate;u.style.display="none",u.classList.add("cake-template"),u.dataset.forUpdate=a,u.dataset.for||(u.dataset.forTemplate=a);let[f,p,d]=h.split(" ");this._register(L,i,"forUpdate",{bind:d,sel:a,iter:f,ins:p}),this.uiid++}t()})};T.prototype._compileSwitch=function(e,i,r){return new Promise(t=>{if(!e.length){t();return}let n=this._static(i)(e,r);if(!n.length){t();return}for(let u=0;u<n.length;u++){let h=`cks${this.uiid}`,f=n[u],p=f.dataset.switch,d="def";if(p.includes(".")){var[s,...a]=f.dataset.switch.split(".");p=s,d=a[0]}f.dataset.switch=h;let m=f.querySelectorAll("[data-case]"),c=[];for(let g=0;g<m.length;g++){let y=m[g],b=y.closest(`[data-switch=${h}]`);if(y.classList.add("cake-template"),b){let v=y.dataset.case,w=`cksc${this.uiid}`;y.dataset.case=`${h}-${w}`,c.push({_id:w,bind:v}),this.uiid++}}this._register(L,i,"switch",{bind:p,sel:h,map:d,cases:c}),this.uiid++}t()})};T.prototype._compileBind=function(e,i,r){return new Promise(t=>{if(!e.length){t();return}let n=this._static(i)(e,r);if(!n.length){t();return}for(let u=0;u<n.length;u++){let h=`ckm${this.uiid}`,f=n[u],d=f.dataset.bind.split(",");for(let m=0;m<d.length;m++){let c=d[m].split(" ").join("");if(c.includes(":"))var[s,a]=c.split(":");else var a=c,s="value";this._register(L,i,"bind",{attr:s,bind:a,sel:h})}this.uiid++,f.dataset.bind=h}t()})};T.prototype._compileAnimate=function(e,i,r){return new Promise(t=>{if(!e.length){t();return}let n=this._static(i)(e,r);if(!n.length){t();return}for(let s=0;s<n.length;s++){let a=`cka${this.uiid}`,u=n[s],h=u.dataset.animate;h=h.split(" ").join("");let f={},p=h.split(",");for(let d=0;d<p.length;d++){let m=p[d],[c,g]=m.split(":");if(c=="ns"){f.ns=g;break}else f[c]={keyframes:g.split("-")}}f.selector={attr:"data-animate",val:a},this._register(L,i,"animate",f),this.uiid++,u.dataset.animate=a}t()})};T.prototype._compileIf=function(e,i,r){return new Promise(t=>{if(!e.length){t();return}let n=this._static(i)(e,r);if(!n.length){t();return}let s=new RegExp("<|>|===|==|!==|!=");for(let a=0;a<n.length;a++){let u=`ci${this.uiid}`,h=n[a],f=h.dataset.if,p=h.dataset.ifBind,d=f.split(",");for(let m=0;m<d.length;m++){let c=d[m],g=c.substring(0,c.indexOf("=")),y=c.substring(c.indexOf("=")+1,c.length);y=y.split(new RegExp("[()]")).join("");let[b,v]=y.split("?"),w=b[0]=="!";hasRegularLog=b.match(s);let S,k,_;if(hasRegularLog){let j=b.split(s);S=j[0].trim(),k=j[1].trim(),_=hasRegularLog[0]}else S=b;w&&(S=S.slice(1));let[E,C]=v.split(":");this._register(L,i,"if",{hasNegate:w,attr:g,ops:_,bind:S,testval:k||null,_true:E,_false:C,sel:u,ifBind:p})}this.uiid++,h.dataset.if=u}t()})};T.prototype._compileClass=function(e,i,r){return new Promise(t=>{if(!e.length){t();return}let n=this._static(i)(e,r);if(!n.length){t();return}let s=new RegExp("<|>|===|==|!==|!=");for(let a=0;a<n.length;a++){let u,h,f,p,d,m,c,g,y;u=`cc${this.uiid}`,h=n[a],f=h.dataset.class;let b=f.split(",");for(let v=0;v<b.length;v++){let w=b[v],[S,k]=w.split("&&");if(S=S.trim(),k=k.trim(),p=S.match(s),S.substring(0,2).includes("!")?(d=!0,y=S.substring(0,2)=="!!"?2:S.substring(0,1)=="!"?1:0):(d=!1,y=0),p){let _=S.split(s);m=_[0].trim(),g=_[1].trim(),c=p[0].trim()}else!d&&(m=S),d&&(m=S.substring(y),g=y==2);this._register(L,i,"class",{hasNegate:d,bind:m,testVal:g,className:k,ops:c,sel:u})}this.uiid++,h.dataset.class=u}t()})};T.prototype._compileAttr=function(e,i,r){return new Promise(t=>{if(!e.length){t();return}let n=this._static(i)(e,r);if(!n.length){t();return}let s=new RegExp("<|>|===|==|!==|!=");for(let a=0;a<n.length;a++){let u,h,f,p,d,m,c,g;u=`cre${this.uiid}`,h=n[a],f=h.dataset.attr;let[y,b]=f.split("&&");b=b.trim();let[v,w]=b.split("=");if(y=y.trim(),p=y.match(s),d=y[0]=="!",p){let S=y.split(s);bind=S[0],g=S[1],c=p[0]}else bind=y;d&&d&&(bind=bind.slice(1)),this._register(L,i,"attr",{hasNegate:d,bind,testVal:g,attrkey:v,attrvalue:w,ops:c,sel:u}),this.uiid++,h.dataset.attr=u}t()})};T.prototype._compileRouter=function(e,i,r){return new Promise(t=>{if(!e.length){t();return}let n=this._static(i)(e,r);if(!n.length){t();return}for(let s=0;s<n.length;s++){let a=`rt${this.uiid}`,u=n[s],h=u.dataset.routerLink;this._register(L,i,"router",{value:h,sel:a}),this.uiid++,u.dataset.routerLink=a}t()})};T.prototype._compileInput=function(e,i,r){return new Promise(t=>{if(!e.length){t();return}let n=this._static(i)(e,r);if(!n.length){t();return}for(let u=0;u<n.length;u++){let h=`cknt${this.uiid}`,f=n[u],p=f.tagName,m=f.dataset.input.split(",");for(let c=0;c<m.length;c++){let g=m[c].split(" ").join("");if(g.includes(":"))var[s,a]=g.split(":");else var a=g,s="value";this._register(L,i,"input",{attr:s,bind:a,sel:h,nodeType:p})}this.uiid++,f.dataset.input=h}t()})};T.prototype.inject=function(e,i,r=!1){return new Promise(t=>{let n=e.getElementsByDataset("bind","for","for-update","switch","toggle","event","animate","if","class","input","attr");t(n)}).then(t=>{let n=[],s={bind:this._compileBind,switch:this._compileSwitch,toggle:this._compileToggle,if:this._compileIf,class:this._compileClass,attr:this._compileAttr,for:this._compileFor,"for-update":this._compileForUpdate,event:this._compileEvents,animate:this._compileAnimate,input:this._compileInput};for(let a in t)t.hasOwnProperty(a)&&t[a].length&&n.push(s[a].apply(this,[t[a],i,r,e]));return console.timeEnd(i),n.length?Promise.all(n):Promise.resolve()}).then(()=>Promise.resolve())};lt.exports=T});var be=A((Yi,ot)=>{var Jt=he(),Wt=W(),Kt=ie(),zt=B();function $(e,i,r){this.name=e,this.template=i,this.options=r,this.handlers=r.handlers,this.subscribe=r.subscribe,this.data={},this.root=r.root,this.items=!1,this.type=r.type||"view",this.toggle=r.toggle,this.targets={},this.animateOptions=r.animate,this.role=r.role,this.isReady=!1,this.await={},this.state=r.state,this.originalState={},this.utils=zt,(e=="app"||r.role=="app")&&(this.staticComponent=r.static||[]),this.container={},this.compile=new Promise(t=>{this._bindHandlers(),t()}).then(()=>this._bindSubscribe()).then(()=>this.cloneState()).then(()=>{switch(this.type=="view"&&!!this.template){case!0:return this.createElementAsync();default:this.isStatic=!1;break}})}$.prototype.isStatic=!1;$.prototype.hasEvent=!1;$.prototype.isConnected=!1;$.prototype.destroyed=!1;$.prototype.isCreated=!1;$.prototype.cloneState=function(){if(!!this.state){for(let e in this.state)this.state.hasOwnProperty(e)&&(this.originalState[e]=this.state[e]);this.$state=(()=>this.state)()}};$.prototype.clearState=function(){!this.state||(this.state=JSON.parse(JSON.stringify(this.originalState)),this.$state=(()=>this.state)())};$.prototype.Subscribe=function(e){this.$observer.registerSubscribe({[e.listenTo]:{[e.original]:[e]}})};$.prototype.Node=function(e){return new Kt(e)};$.prototype._bindHandlers=function(){for(let e in this.handlers)if(this.handlers.hasOwnProperty(e)){let i=this.handlers[e],r=i.name;i=i.bind(this),i.original=r,i.binded=this.name,this.handlers[r]=i,this.initAwaitHandlers(e)}this.await.destroy||(this.await.destroy=Promise.resolve()),this.await.animateRemove||(this.await.animateRemove=Promise.resolve())};$.prototype.initAwaitHandlers=function(e){this.await[e]=Promise.resolve()};$.prototype._bindSubscribe=function(){let e={};for(let i in this.subscribe)if(this.subscribe.hasOwnProperty(i)){if(subscribe=this.subscribe[i],!!subscribe.components&&!subscribe.handler)throw new Error(`there is no handler in format many of subscribe in event ${i}`);if(!subscribe.components&&!!subscribe.handler)throw new Error(`there is no components in format many of subscribe in event ${i}`);if(!!subscribe.components&&!!subscribe.handler){let t=i,{components:n,handler:s}=subscribe;s=s.bind(this),s.binded=this.name,s.original=t;for(let a=0;a<n.length;a++){let u=n[a];e[u]||(e[u]={}),e[u][t]||(e[u][t]=[]),s.listenTo=u,e[u][t].push(s)}}else{e[i]||(e[i]={});let t=subscribe;for(let n in t)if(t.hasOwnProperty(n)){let s=t[n],a=s.name;try{s=s.bind(this)}catch{}s.original=a,s.binded=this.name,s.listenTo=i,e[i][a]||(e[i][a]=[]),e[i][a].push(s)}}}this.subscribe=e};$.prototype.notifyStaticComponent=function(e,i,r){Cake.Observer.notify(e,i,r,this.staticComponent[e],!0,this.name)};$.prototype.doFor=function(e,i){let r=()=>this.html;if(i!=null)return this.$attrib.notifyFor(e,i,null,this.name,r())};$.prototype.doToggle=function(e,i){this.$attrib.notifyToggle(e,i,null,this.name,this.html)};$.prototype.doSwitch=function(e,i){this.$attrib.notifySwitch(e,i,null,this.name,this.html)};$.prototype.doIf=function(e,i){this.$attrib.notifyIf(e,i,null,this.name,this.html)};$.prototype.$animate=function(e){let i=this.$attrib.getWatchItemsByType(this.name,"animate"),r=this.animateOptions,t=[];return(()=>{if(!(!i.length&&!(i instanceof Array)||!r))for(let n=0;n<i.length;n++){let s=i[n],{ns:a,selector:u}=s;if(s.ns){if(r[a]){let h=r[a];Object.assign(s,r[a]),delete r[a]}}else t.push(i)}})(),i.length?((()=>{let n={},s={};for(let a in r)r.hasOwnProperty(a)&&(s.val=a,n.selector=s,Object.assign(n,r[a]),i.push(n),n={},s={})})(),new Jt(i,this.html).animate(e)):!1};$.prototype.$templating=function(e,i,r){let t=i||this.template;return new Wt(e,t,r).createElement()};$.prototype.createElement=function(){if(!(this.template.substring(0,1)=="#"))return;let i=this.template.substr(1),r=document.getElementById(i),t=this.isTemplate=r&&r.toString().includes("Template");if(!r)throw new Error(`the template for ${this.name} is not found with.`);return new Promise(n=>{switch(t){case!0:{let s=r.getContent(!0);if(!s)throw new Error(`it might be theres no template in component - ${this.name}`);s.cake_component=this.name,this.html=this.Node(s),this._parseHTML(this.isStatic).then(()=>{this._watchBindedItems(),n()})}break;case null:n();break;default:{let s=r;if(!s)throw new Error(`it might be theres no template in component - ${this.name}`);s.cake_component=this.name,this.html=this.Node(s),this.isStatic=!0,this._parseHTML(this.isStatic).then(()=>{n()})}}})};$.prototype.createElementAsync=function(){return new Promise(e=>{this.createElement().then(()=>{e()})}).then(()=>{this.isReady=!0})};$.prototype._isParsed=!1;$.prototype._parseHTML=function(e=!1){return this.$attrib.inject(this.html,this.name,e).then(()=>{this.original=this.html.cloneNode(),this._isParsed=!0})};$.prototype.render=function(e){let{root:i,multiple:r,cleaned:t,emit:n,static:s,hashed:a,data:u}=e||{},h={emit:n||{}},f=p=>(this.state||{})[p]||null;return new Promise((p,d)=>{!!i&&(this.root=i),r&&this._smoothReset(),this.isReady?p():this.createElement().then(()=>(a===!0&&this.$hash.add(this.name),!this.template&&this.fire.isConnected&&this.fire.isConnected(h,!0))).then(()=>{this.isReady=!0,p()})}).then(()=>this.await.destroy.then(()=>this.await.animateRemove).then(()=>new Promise((p,d)=>{let m=this.$attrib.getWatchItemsByType(this.name,"for");Promise.all(m.map(c=>this.doFor(c,f(c)))).then(()=>{p(this.html)})}).then(p=>(h={element:p,emit:n},new Promise((d,m)=>{try{this.fire.beforeConnected&&this.fire.beforeConnected(h,!0),d(p)}catch(c){m(c)}}))).then(p=>{if(!this.isStatic)return(u?(()=>new Promise(m=>{let c=p.getElement();c=this.$templating(u,c),this.html=p=this.Node(c),this.html.replaceDataSrc(),u=null,m()}))():Promise.resolve()).then(()=>{p.appendTo(this.root,t),this.isConnected=!0})}).then(()=>{}).then(()=>this.findContainer()).then(()=>{try{return this.fire.isConnected&&this.fire.isConnected(h,!0)}catch(p){console.log(440,p)}}).then(()=>this.findTarget()).then(()=>this.addEvent(s,r)).then(()=>this.$animate("render")).then(()=>new Promise((p,d)=>{setTimeout(()=>{this._watchReactive(),p()},100)}))))};$.prototype.renderAsync=function(e){this.render(e).then(()=>{this.$persist.append(this.name)})};$.prototype._smoothReset=function(){this.isConnected=!1,this.html=this.original.cloneNode()};$.prototype._hardReset=function(e){return this.isConnected=!1,this.$persist.remove(e),this.html=this.original.cloneNode(),!0};$.prototype.reset=function(){let e=this.$animate("remove");return e instanceof Promise?this.await.animateRemove=new Promise(i=>{e.then(()=>this.html.remove()).then(()=>{this.container={}}).then(()=>this.clearState()).then(()=>this._hardReset(this.name)).then(()=>{i()})}):new Promise(i=>{this.html.remove(this.name),this.clearState(),this.container={},this._hardReset(this.name),i()})};$.prototype.addEvent=function(e,i){if(!!i&&!!e)return!1;let n=this.name;function s(a,u,h,f){return function(p){h||p.preventDefault(),f&&p.stopPropagation(),Cake.Observer.notify(u,a,p)}}if(!!this.targets){for(let a in this.targets)if(this.targets.hasOwnProperty(a)){let u=this.targets[a];for(let h of u){let{sel:f,el:p,cb:d}=h,m=a,c=a.substring(0,2),g=c.includes("~"),y=c.includes("^");g||y?(m=a.slice(1),d=d||m):d||(d=a),p.Ref().get("__cake__events")||p.Ref().set("__cake__events",{});let b=p.Ref().get("__cake__events");if(!b[d])p.addEventListener(m,s(d,n,g,y),!0),b[d]=!0,p.Ref().set("__cake__events",b);else continue}}}};$.prototype.findTarget=function(){let e=this.$attrib.getEventTarget(this.name);return new Promise(i=>{for(let r of e){let t=document.querySelectorAll(`[data-event=${r.sel}]`);for(let n=0;n<t.length;n++)this.targets[r.event]||(this.targets[r.event]=[]),this.targets[r.event].push({el:t[n],...r})}i()})};$.prototype.toggler=function(e){let i=this.$attrib.getWatchItemsByType(this.name,"toggle"),r=class{constructor(n,s,a,u){this.toggle=u.toggle,this.bind=n,this.bases=s,this.cache=u.$cache,this.html=a}check(n){let s=this.toggle[n];if(!s)console.error(`${n} is not found in toggle! choose from ${JSON.stringify(Object.keys(this.toggle))}`);else{if(i.length){let{ns:a}=s,u=i.find(h=>h.name==`ns-${a}`);u&&(s.sel=`[data-toggle=${u.sel}]`)}return s}}_toggle(){let n=this.check(this.bind);if(!n)return;let{basis:s="data-name",cls:a="is-active",mode:u="radio",sel:h,persist:f=!0}=n,p=this.html.querySelectorAll(h);if(!p.length)return;let d,m;if(p.length==1){let c=typeof this.bases=="boolean",g=!!this.bases,y=p[0];if(f){let b=function(v,w,S){S?v.classList.contains(w)&&v.classList.remove(w):v.classList.contains(w)||v.classList.add(w)};c?(g?(this.cache.createOrUpdate(this.bind,!0),b(y,a,!0)):(this.cache.createOrUpdate(this.bind,!1),b(y,a,!1)),y.classList.toggle(a)):(this.cache.createOrUpdate(this.bind,!y.classList.contains(a)),y.classList.toggle(a))}}else for(let c=0;c<p.length;c++){let g=p[c],y=g.classList.contains(a),b=g.getAttribute(s);b==this.bases?(u=="switch"?g.classList.toggle(a):y||g.classList.add(a),f&&this.cache.createOrUpdate(this.bind,b),m=b):y&&(g.classList.remove(a),d=g.getAttribute(s))}return{prev:d,next:m}}_recall(){let n=this.check(this.bind);if(!n)return;let{basis:s="data-name",cls:a="is-active",sel:u}=n;return this.cache.get(this.bind).then(h=>{if(!h)return h;let f=h,p=this.html.querySelectorAll(u);if(!!p.length){if(p.length==1){let d=p[0];f&&d.classList.add(a)}else for(let d=0;d<p.length;d++){let m=p[d],c=m.classList.contains(a);m.getAttribute(s)==f&&(c||m.classList.add(a))}return f}})}},t=(n,s)=>new r(n,s,this.html,this)._toggle();return t.recall=n=>new r(n,!1,this.html,this)._recall(),t};$.prototype.findContainer=function(){return new Promise(e=>{let i=this.html.getContainers();for(let r=0;r<i.length;r++){let t=i[r],n=t.dataset.container;n&&(this.container[n]=t)}e()})};$.prototype._watchBindedItems=function(){};$.prototype._watchReactive=function(){if(!this.items.length){this.items=this.$attrib.getWatchItems(this.name);let e=this.name,i=this.$attrib.getWatchItemsByType(this.name,"input")||{input:!1},r=this.$attrib.notify[e];i&&i.forEach(t=>{let{attr:n,bind:s,sel:a,nodeType:u}=t,h=document.querySelector(`[data-input=${a}]`);h&&!h._reactive&&(u=="INPUT"||u=="TEXTAREA"?(r.forEach(f=>{f(e,{value:h.value,bind:s})}),h.addEventListener("input",f=>{r&&r.length&&r.forEach(p=>{p(e,{value:f.target.value,bind:s})})}),h.addEventListener("change",f=>{r&&r.length&&r.forEach(p=>{p(e,{value:f.target.value,bind:s})})})):u=="SELECT"&&((()=>{let{selectedOptions:f}=i,p=[];for(let d=0;d<f.length;d++){let m=f[d],c=m.text,g=m.value;p.push({text:c,value:g})}r&&r.length&&r.forEach(d=>{d(e,{value:p,bind:s})})})(),h.addEventListener("change",f=>{let{selectedOptions:p}=f.target,d=[];for(let m=0;m<p.length;m++){let c=p[m],g=c.text,y=c.value;d.push({text:g,value:y})}r&&r.length&&r.forEach(m=>{m(e,{value:d,bind:s})})})),h._reactive=!0)})}};$.prototype.observer=function(e){function i(r){return this.handler[r]}this.observer=new Observer(this,e,i.bind(this))};$.prototype.variable=function(e){let i=Object.keys(e),r={},t=[];function n(s,a,u){a||(r[s]=`value is not '${u}'`)}for(let s in e)if(e.hasOwnProperty(s)){let a=e[s],{type:u,value:h}=a,f;["string","number"].includes(u)?f=typeof h==u:h instanceof Array?f=u=="array":f=u=="object",t.push(h),n(s,f,u)}if(Object.keys(r).length)throw new Error(JSON.stringify(r));return t};ot.exports=$});var ct=A((Zi,at)=>{var Xt=ye(),ve=de()(),J=be(),Gt=fe(),Yt=ge(),Qt=ue(),Zt=Y()(),Vt=ce(),ei=pe(),Qi=B();function O(e){this.componentName=e,this.components={}}O.app=function(e){this.name=e.name||""};O.Components=function(e){return{subscribe(i,r){function t(){let n=O.Components[e];if(n&&i instanceof Function){let s=i.name;r&&(i=i.bind(r)),i.binded="external",i.original=s,i.listenTo=n.name,n.Subscribe(i)}}return new Promise((n,s)=>{let a=setInterval(()=>{O.Components[e]&&(t(),clearInterval(a),n())})})}}};O.Models={};O.Subscribe={};O.Handlers={};O.Attributes=new Xt;O.Models.$loaded=function(e){return new Promise((i,r)=>{let t=setInterval(()=>{O.Models[e]&&(clearInterval(t),i(O.Models[e]))});setTimeout(()=>{O.Models[e]||(clearInterval(t),r(e))},1e4)})};O.MainMessageChannel=function(){let e=new MessageChannel;return{send(i){e.port2.postMessage(i)},receive(i){e.port1.onmessage=function(r){let{isTrusted:t,data:n}=r||{isTrusted:!1};i(t?{status:1,data:n}:{status:0,err:"not trusted!"})}}}}();O.Utils={scopeTrap(e){return!1},scopeNotifier(e){return e}};O.create=function(e,i,r){new O(e,i,r).create(e,i,r)};O.plugin=function(){};O.init=function(e){return new J(e)};O.Hasher=new Gt(O.Components);O.Hasher.listen();O.Router=Yt(O.Components,J);O.Persistent=new Qt;O.Persistent.listen(O.Components);O.Cache=new Zt({name:"cache",storage:"session",child:"object"});O.getSubscriber=function(e,i){let r=O.Subscribe,t={};for(let n in r)if(r.hasOwnProperty(n)){let s=r[n];for(let a in s)if(s.hasOwnProperty(a)){let u=s[a];for(let h of u){let f=h,p=f.original,d=f.binded;if(f.listenTo==e){if(p==i)if(!t[d])t[d]=i;else{let c=t[d]instanceof Array?t[d]:[t[d]];t[d]=c.concat(i)}else if(!i)if(!t[d])t[d]=p;else{let c=t[d]instanceof Array?t[d]:[t[d]];t[d]=c.concat(p)}}}}}return t};O.Observer=new Vt(O.Subscribe,O.Handlers);O.prototype._defineProperty=function(e,i,r,t){Object.defineProperty(e,i,{configurable:!0,get(){return r()},set(n){t&&t(n)}})};O.prototype._defineProperty(J.prototype,"$observer",function(){return O.Observer});O._globalScope=new ve("globalScope");O.prototype._defineProperty(J.prototype,"$globalScope",function(){return O._globalScope});O._universalScope=new ve("universalScope");O.$universalScope=function(){return O._universalScope};O.prototype._defineProperty(J.prototype,"$attrib",function(){return O.Attributes});O.prototype._defineProperty(J.prototype,"$persist",function(){return O.Persistent});O.prototype._defineProperty(J.prototype,"$cache",function(){return O.Cache});O.prototype._defineProperty(J.prototype,"$hash",function(){return O.Hasher});O.prototype.create=function(e,i,r){console.time(e);let t=new J(e,i,r),n=new ve(e);n.registerNotifier(function(s,a,u,h){return O.Attributes.notifier(s,a,u,h)}),O.Attributes.registerNotifier(e,function(s,a){return n.notifier(s,a)}),t.compile.then(()=>{let{subscribe:s,root:a,html:u,handlers:h,role:f,state:p}=t;return O.Observer.registerSubscribe(s).then(()=>({root:a,handlers:h}))}).then(({handlers:s,root:a})=>{O.Observer.registerHandlers(s,t.name),this._defineProperty(t,"root",function(){if(t._root)return t._root;{let u=a||"#app",h=document.querySelector(u);if(h)return h}throw new Error(`the selector '${a}' as container of component '${t.name}' is not found!`)},function(u){Object.assign(t,{_root:u})}),t.role=="form"&&(()=>{let u=ei(t),h=()=>t.root.querySelector("FORM");for(let f in u)u.hasOwnProperty(f)&&Object.defineProperty(h,f,{get(){return u[f]}});this._defineProperty(t,"$form",function(){return h})})(),this._defineProperty(t,"$scope",function(){return n})}).then(()=>{t.fire=function(){function s(u,h){h=h?typeof h=="function"?h.bind(t)():function(){return h}.bind(t)():null;let f={[u]:()=>h};if(fn=f[u].bind(t),typeof fn=="function"){let m=function(g){let y={};if(!g)return y;let b=g.attributes;if(b)for(let v=0;v<b.length;v++){let w=b[v],S=w.name,k=w.value;y[S]=k}return y};var p=m;fn.name=u,fn.original=u,fn.binded=t.name,O.Observer.registerHandlers({[u]:fn},t.name);let d=h;if(h&&(h.element||h.root||h.container)){let g=m(h.element),y=m(h.root),b=m(h.container);d={status:0,attributes:{element:g,root:y,container:b}}}O.MainMessageChannel.send({component:t.name,event:u,payload:d});let c=O.Observer.notify(t.name,u,{}).then(()=>O.Observer.results[t.name][u]);return t.await[u]=c,t.await[u]}console.error("the param in fire is not an instance of function")}function a(u,h){for(let f in h)if(h.hasOwnProperty(f)){let p=h[f],d=p.original;Object.defineProperty(u,d,{get(){let m={[d]:function(c,g){if(g!=null&&(g=g),g==null&&d=="destroy"&&(g=!0),g==null&&(g=!1),g){let y=new Promise((b,v)=>{setTimeout(()=>{let w=c;w=w||{},O.Observer.notify(t.name,d,w).then(()=>O.Observer.results[t.name][d]).then(S=>{b(S)}).catch(S=>{console.log(448,t.name,d,w),console.trace(),console.error(S)})})});return t.await[d]=y,t.await[d]}else return p(c)}};return m[d]=m[d].bind(t),m[d].originalName=d,m[d].binded=t.name,m[d]}})}}return a(s,t.handlers),s}()}).then(()=>{t.type=="view"&&(t.toggler=t.toggler(t),O.Components[e]=t)}).then(()=>{t.options.router&&O.Router.subscribe(t.options.router.bind(t)),t.options.data&&t.options.data.bind(t.data)(t),t.options.init&&t.options.init.bind(t)(),t.options.utils&&t.options.utils.bind(t.utils)(t)}).then(()=>{t.type=="model"&&(O.Models[e]=t),t.isStatic&&t.type=="view"&&t.render()})};at.exports=O});var Vi=we(),er=Se(),tr=ke(),ir=B(),rr=Pe(),nr=ie(),sr=ce(),lr=W(),or=he(),ar=ue(),cr=fe(),hr=pe(),ur=Y()(),pr=de()(),dr=ge()(),gr=ye(),mr=be(),ti=ct();window.Cake=ti;})();
