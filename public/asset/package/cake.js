(()=>{var A=(e,i)=>()=>(i||e((i={exports:{}}).exports,i),i.exports);var we=A(()=>{(function(e){e.env={destructure:!0};let i=e.env;try{let{a:r}={a:!0}}catch{i.destructure=!1}Promise.prototype.ObjectType="Promise"})(window)});var Se=A(()=>{(function(e){HTMLCollection.prototype.toArray=function(){let i=[];for(let r=0;r<this.length;r++)i[r]=this[r];return i},NodeList.prototype.toArray=function(){let i=[],r=-1,t=this.length;for(;++r<t;)i[r]=this[r];return i},Object.cache=Object.create(null),Object.caching=i=>{let r=Object.cache;return r[i]||(r[i]={}),{set(t,n){return r[i][t]=n,!0},get(t){return r[i][t]}}},String.prototype.toHyphen=function(){let i=Object.cache,r=null,t=this;if(i.toHyphen||(i.toHyphen={}),i[t]&&(r=i[t]),r!=null)return r;let n=t.split(""),s="",a=-1;for(;++a<n.length;){let h=n[a];switch(a){case 0:s+=h.toLowerCase();break;default:h.charCodeAt()<91&&(s+="-"),s+=h.toLowerCase()}}return i[t]=s,r=s,r},String.prototype.toProper=function(){let i=this,r=Object.caching("toProper").get(i);if(r)return r;{let t=i.substring(0,1),n=i.slice(1),s=`${t.toUpperCase()}${n}`;return Object.caching("toProper").set(i,s),s}},String.prototype.toCamelCase=function(){let i=this.toLowerCase(),r=Object.cache,t=null;if(r.toCamel||(r.toCamel={}),r=r.toCamel,r[i])return r[i];{let n=i.split("-");if(n.length==1)return i;let s="",a=-1,h=n.length;for(;++a<h;){let u=n[a];switch(a){case 0:s+=u;break;default:{let f=u.substring(0,1).toUpperCase(),p=u.substring(1);s+=f+p}break}}return r[i]=s,s}},HTMLElement.prototype.querySelectorIncluded=function(i,r,t){let n=this.querySelector(i);return n||(()=>{switch(!0){case(!r&&!t):{let s=this.closest(i);s==this&&(n=s)}break;case(!!r&&!!t):n=this.getAttribute(r)==t?this:null;break;case(!!r&&!t):n=this.getAttribute(r)?this:null;break}return n})()},HTMLElement.prototype.querySelectorAllIncluded=function(i,r,t){let n=this.querySelectorAll(i).toArray();switch(!0){case(!r&&!t):{let s=this.closest(i);s==this&&n.push(s)}break;case(r&&t):this.getAttribute(r)==t&&n.push(this);break;case(r&&!t):this.getAttribute(r)&&n.push(this);break}return n},HTMLDocument.prototype.querySelectorIncluded=function(i){return this.querySelector(i)},HTMLDocument.prototype.querySelectorAllIncluded=function(i){return this.querySelectorAll(i)},Array.prototype.toggler=function(i,r){for(let t=0;t<this.length;t++){let n=this[t];(n.dataset.name==i||n.classList.contains(r))&&n.classList.toggle(r)}},HTMLElement.prototype.Ref=function(){let i="_cakes_storage";!this[i]&&(this._cakes_storage={});let r=this[i];return{set(t,n){r[t]=n},get(t){return r[t]},getAll(t){return r},remove(t){delete r[t]}}}})(window)});var ke=A(()=>{Object.keys||(Object.keys=function(e){var i=[];for(var r in e)e.hasOwnProperty(r)&&i.push(r);return i})});var B=A((ci,_e)=>{var X={},G={typeof:function(e){switch(!0){case typeof e=="string":return"string";case typeof e=="number":return"number";case e instanceof Array:return"array";case e instanceof Function:return"function";case e instanceof HTMLCollection:return"htmlcollection";case e instanceof NodeList:return"htmlnodelist";case e instanceof Element:return"domlement";case e instanceof Object:return"object"}},isArray:function(e){return this.typeof(e)=="array"},isObject:function(e){return this.typeof(e)=="object"},isNumber:function(e){return this.typeof(e)=="number"},isString:function(e){return this.typeof(e)=="string"},isHTMLCollection:function(e){return this.typeof(e)=="htmlcollection"},isNodeList:function(e){return this.typeof(e)=="htmlnodelist"},isElement:function(e){return this.typeof(e)=="domlement"},isFunction:function(e){return this.typeof(e)=="function"}},ae={each:function(e,i,r){if(r=="object"){var t=0;for(var n in e)e.hasOwnProperty(n)&&(i({key:n,value:e[n]},t),t=t+1)}else for(var s=0;s<e.length;s++)i(e[s],s)},map:function(e,i){var r=G.isArray(e)||e.length?"array":"object",t=e.length&&r=="array"?[]:{};return this.each(e,function(n,s){var a=i(n,s);r=="object"?t[a.key]=a.value:t.push(a)},r),t},reduce:function(e,i,r){var t=G.typeof(e);return this.each(e,function(n,s){i=r(n,i,s)},t),i},filter:function(e,i){var r=G.isArray(e)||e.length?"array":"object",t=e.length&&r=="array"?[]:{};return this.each(e,function(n,s){var a=i(n,s);a&&(r=="object"?t[n.key]=n.value:t.push(n.value))},r),t}},Oe={perf:function(e){console.time("test"),e(),console.timeEnd("test")},logTest:function(e,i,r){try{e=JSON.parse(e)}catch{}try{r=JSON.parse(r)}catch{}switch(i){case"==":return e==r;case"!=":return e!=r;case"<":return e<r;case">":return e>r;case">=":return e>=r;case"<=":return e<=r}},toUrlSearchParams:function(e,i=!0){let r="";for(let t in e)if(e.hasOwnProperty(t)){let n=e[t];n.toString().includes("Object")&&(n=JSON.stringify(n)),i&&n?r+=`${encodeURI(t)}=${encodeURI(n)}&`:r+=`${encodeURI(t)}=${encodeURI(n)}&`}return r.slice(0,r.length-1)},sanitize:function(e){if(typeof e!="string")return e;let i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"},r=/[&<>"'/]/ig;return e.replace(r,t=>i[t])},toFormData:function(e,i={}){let r=new FormData(e),t={},n=new FormData;for(let[s,a]of r.entries())if(!(s&&s.includes("{{"))){let h,u=e[s];u&&u.closest&&!u.closest(".cake-template")&&(u.tagName=="INPUT"&&u.getAttribute("type")=="checkbox"?a=u.checked:(i.sanitize==null||!!i.sanitize)&&(a=this.sanitize(a)),i.json?i.trim?a!=""&&(t[s]=a):t[s]=a:n.append(s,a))}return i.json?t:n},splitBySpace:function(e,i){if(e&&(e=e.split(" "),G.isArray(e)))for(let r=0;r<e.length;r++)i(e[r])},toArray(e){let i=[];if(!e.length)return i;for(let r=0;r<e.length;r++)i.push(e[r]);return i},timeOut(e,i=1){setTimeout(()=>{e()},i)},instanceID(){return location.origin},removeWhiteSpace(e){return String(e).split(" ").join("")},recurse(e,i){return new Promise((r,t)=>{try{let n=e.length,s=0,a=()=>{n>s?(i(e[s]),s+=1,a()):r()};a()}catch(n){t(n.message)}})},browser(){if(window._browser)return window._browser;var e=!!window.opr&&!!opr.addons||!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,i=typeof InstallTrigger!="undefined",r=/constructor/i.test(window.HTMLElement)||function(h){return h.toString()==="[object SafariRemoteNotification]"}(!window.safari||safari.pushNotification),t=!!document.documentMode,n=!t&&!!window.StyleMedia,s=!!window.chrome&&!!window.chrome.webstore,a=(s||e)&&!!window.CSS;return window._browser=e?"Opera":i?"Firefox":r?"Safari":s?"Chrome":t?"IE":n?"Edge":a?"Blink":"Don't know"},isOpera(){return this.browser=="Opera"},isFirefox(){return this.browser()=="Firefox"},isSafari(){return this.browser=="Safari"},isChrome(){return this.browser=="Chrome"},isIE(){return this.browser=="IE"},isEdge(){return this.browser=="Edge"},isBlink(){return this.browser=="Blink"},device(){return navigator.userAgent.includes("Android")?"android":/iPhone|iPad|iPod/i.test(navigator.userAgent)?"IOS":"desktop"},isAndroid(){return this.device()=="android"},isIOS(){return this.device()=="ios"},isDesktop(){return this.device()=="desktop"}};try{X.UTILS={...ae,...G,...Oe}}catch{X.UTILS={},te=ae.each,te(ae,function(i,r){X.UTILS[i]=r}),te(G,function(i,r){X.UTILS[i]=r}),te(Oe,function(i,r){X.UTILS[i]=r})}var te;_e.exports=X.UTILS});var Pe=A(()=>{(function(){customElements.define("sub-template",class extends HTMLElement{constructor(){super()}connectedCallback(){this.replace(this)}replace(e){let i=e.dataset.template,r=document.getElementsByName(i);if(r.length>1){console.error(`template with name ${i} has more than one reference.`);return}if(!r)throw e.remove(),new Error(`${i} is not found!`);if(r[0]){let t=r[0];if(t.constructor.name=="HTMLTemplateElement"){if(t=t.content.cloneNode(!0).firstElementChild,!t)return;let n=e.attributes;for(let s=0;s<n.length;s++){let a=n[s];a.name!="data-template"&&t.setAttribute(a.name,a.value)}e.replaceWith(t)}else throw new Error(`${i} is not referred to a Template Element!`)}}}),HTMLTemplateElement.prototype.replaceSubTemplate=function(e){let i=e.getElementsByTagName("sub-template");if(i){i=i.toArray();for(let r=0;r<i.length;r++){let t=i[r];customElements.get("sub-template").prototype.replace(t)}}},HTMLTemplateElement.prototype.collectContent=function(){let e=this,i=null,r=e.cloneNode(!0),t=document.createDocumentFragment(),n=r.content.querySelector("style");n&&t.appendChild(n);let s=[];for(let a=0;a<r.content.children.length;a++){let h=r.content.children[0];this.replaceSubTemplate(h),s.push(h)}return i={style:t.children[0],others:s},i},HTMLTemplateElement.prototype.parseStyle=function(e){if(!e)return!1;var i=e.textContent;if(i=i.replace(/\s/g,""),!i.length)return;let r=!1,t=!1,n=!1,s=i.split(""),a="";i="";var h=!1;for(let u=0;u<s.length;u++){let f=s[u];f=="{"&&(r=!0,t=!0),f=="}"&&(r=!1,t=!1),!r&&f!="	"&&f!="}"&&f!=" "&&f!=";"&&(a+=f),t&&f!="	"&&f!="{"&f!=" "&&(i+=f),f=="}"&&(h||(h={}),h[a]=i,a="",i="")}return h},HTMLTemplateElement.prototype.parseHTML=function(e){if(e){var i=document.createElement("HTML");for(let r=0;r<e.length;r++){let t=e[r];i.append(t)}}return i||!1},HTMLTemplateElement.prototype.getContent=function(e){let{style:i,others:r}=this.collectContent(),t=this.parseStyle(i),n=this.parseHTML(r);for(let s in t)if(t.hasOwnProperty(s)){let a=n.querySelectorAll(s),h=t[s];for(let u=0;u<a.length;u++)a[u].setAttribute("style",h)}return n=e?n.children.toArray():n.innerHTML,n.length==1?n[0]:n}})()});var ie=A((fi,$e)=>{function x(e){this.el=x.toArray(e)}x.toArray=function(e){let i=[];switch(!0){case e instanceof Array:i=e;break;case(e.length&&e.tagName&&e.tagName!="FORM"&&!(e instanceof Array)):for(let r=0;r<e.length;r++)i.push(e[r]);break;case!(e instanceof Array):i=[e];break}return i};x.prototype.getElements=function(){return this.el};x.prototype.getElement=function(){return this.el[0]};x.prototype.remove=function(e){let i=-1,r=this.el.length,t=document.createDocumentFragment();for(;++i<r;){let n=this.el[i];n&&t.appendChild(n)}fr=null};x.prototype.replaceDataSrc=function(){let i=this.el[0].querySelectorAll("[data-src]");for(let r=0;r<i.length;r++)el=i[r],el.setAttribute("src",el.dataset.src),el.removeAttribute("data-src")};x.cloneNode=function(e){e=e instanceof Array?e:this.toArray(e);let i=[];for(let r=0;r<e.length;r++)i.push(e[r].cloneNode(!0));return new x(i)};x.prototype.dataset=function(e,i){let r=this.el.length,t=-1;for(;++t<r&&!(this.el[t].dataset[e]&&i(this.el[t])=="break"););return!0};x.prototype.getContainers=function(){return this.getElementsByDataset("container").container};x.prototype.cloneNode=function(e){return e=this.el,x.cloneNode(e)};x.prototype.getAllElements=function(){let e=this.el.length,i=[];switch(!0){case e==1:i=this.el[0].getElementsByTagName("*").toArray();break;case e>1:{let r=-1;for(;++r<e;){let n=this.el[r].getElementsByTagName("*");if(n)for(let s=0;s<n.length;s++)i.push(n[s])}}break}return i};x.prototype.appendTo=function(e,i){if(!e&&!e.attributes)throw new TypeError(`the ${e} is not an instance of Element`);i&&(e.innerHTML="");for(let r=0;r<this.el.length;r++){let t=this.el[r];e.appendChild(t)}};x.prototype.getElementsByTagName=function(e){let i=this.el.length,r=[];switch(!0){case i==1:r=this.el[0].getElementsByTagName(id).toArray();break;case i>1:{let t=-1;for(;++t<i;){let s=this.el[t].getElementsByTagName(selector);if(s)for(let a=0;a<s.length;a++)r.push(s[a])}}break}return r};x.prototype.getElementById=function(e){let i=this.el.length,r=[];switch(!0){case i==1:r=this.el[0].getElementById(id);break;case i>1:{let t=-1;for(;++t<i;){let s=this.el[t].querySelector(selector);s&&r.push(s)}}break}return r};x.prototype.querySelectorAll=function(e){let i=this.el.length,r=[];switch(!0){case i==1:r=this.el[0].querySelectorAll(e);break;case i>1:{let t=[],n=-1;for(;++n<i;){let a=this.el[n].querySelectorAll(e);a&&(r=r.concat(a.toArra()))}}break;default:r=[]}return r};x.prototype.querySelector=function(e){let i=this.el.length,r=[];switch(!0){case i==1:r=this.el[0].querySelector(e);break;case i>1:{let t=-1;for(;++t<i;){let s=this.el[t].querySelector(e);s&&r.push(s)}}break}return r};x.prototype.querySelectorIncluded=function(e,i,r){let t=this.el.length,n=[];switch(!0){case t==1:n=this.el[0].querySelectorIncluded(e,i,r);break;case t>1:{let s=-1;for(;++s<t;){let h=this.el[s].querySelectorIncluded(e,i,r);h&&n.push(h)}}break}return n};x.prototype.querySelectorAllIncluded=function(e,i,r){let t=this.el.length,n=[];switch(!0){case t==1:n=this.el[0].querySelectorAllIncluded(e,i,r);break;case t>1:{let s=-1;for(;++s<t;){let h=this.el[s].querySelectorAllIncluded(e,i,r);h&&(n=n.concat(h.toArra()))}}break}return n};x.prototype.contains=function(e){let i=this.el.length,r=!1;switch(i==1){case!0:r=this.el[0].contains(e);break;case!1:{let t=-1;for(;++t<i;)if(this.el[t].contains(e)){r=!0;break}}break}return r};x.prototype.getElementsByDataset=function(){let e,i,r,t,n,s;for(e=arguments,o={},length=e.length,r=-1,t=-1;++r<this.el.length;)for(n=this.el[r];++t<length;)i=e[t],n.getAttribute(`data-${i}`)?o[i]=[n]:o[i]=[],s=n.querySelectorAll(`[data-${i}]`),s.length&&(o[i]=o[i].concat([...s]));return o};$e.exports=x});var ce=A((pi,Ee)=>{function re(e,i,r){this.subscribe=e,this.handlers=i,this.logger=r||!1,this.stat={handlers:{},subscribe:{}},this.results={},this.wm=new WeakMap}re.prototype.notify=function(e,i,r,t,n,s){function a(){return{_component:e,_event:i,_e:r}}function h(c){return c}let{_component:u,_event:f,_e:p}=a(),g=this.handlers[u]&&this.handlers[u][f];if(g==null&&n){let c={[f]:function(){return p}};c[f].binded=u,c[f].listenTo=s,g=c[f]}if(u=g.binded,g=g,!g){console.error(`no setup handler for the event ${f} in ${u} component`);return}let m=new Promise((c,d)=>{let y=g(p);c(y)});return this.stat.handlers[g.original]+=1,m.then(c=>{let d=[];if(this.results[u]||(this.results[u]={}),this.subscribe[u]&&this.subscribe[u][f]){let y=this.subscribe[u][f];t=t?(()=>{y=y.filter(b=>{let v=b.binded;return t.includes(v)})})():!0;for(let b=0;b<y.length;b++){let v=y[b];this.stat.subscribe[v.original]+=1,d.push(new Promise((w,S)=>{try{let O=(()=>v(c))();O&&O.ObjectType=="Promise"?O.then(_=>{this.results[u]||(this.results[u]={}),this.results[u][f]=O,w()}).catch(_=>{S(_)}):(this.results[u][f]=O,w())}catch(O){console.log(O),S(O)}}))}}else this.logger&&console.info(`no subscriber for (${f}) event of (${u}) component`),this.results[u][f]=c;return Promise.all(d).then(()=>{c=null})})};re.prototype.registerSubscribe=function(e){return new Promise((i,r)=>{for(component in e)if(e.hasOwnProperty(component))if(!this.subscribe[component])this.subscribe[component]={};else continue;i()}).then(()=>{let i={};for(component in e)if(e.hasOwnProperty(component)){let r=e[component];for(let t in r)if(r.hasOwnProperty(t)){let n=r[t];for(let s=0;s<n.length;s++){let a=n[s];i[component]||(i[component]={}),i[component][a.original]||(i[component][a.original]=[]),i[component][a.original].push(a),this.stat.subscribe[a.original]=0}}}return i}).then(i=>{for(let r in i)if(i.hasOwnProperty(r)){this.subscribe[r]||(this.subscribe[r]={});for(let t in i[r])if(i[r].hasOwnProperty(t))for(let n of i[r][t])this.subscribe[r][n.original]||(this.subscribe[r][n.original]=[]),this.subscribe[r][n.original].push(n)}i={}})};re.prototype.registerHandlers=function(e,i){this.handlers[i]||(this.handlers[i]={});for(let r in e)if(e.hasOwnProperty(r)){let t=e[r];this.handlers[i][r]=t,this.stat.handlers[t.original]=0}};Ee.exports=re});var J=A((di,Te)=>{function Z(e,i,r){this.data=e,this.template=i,this.isConvert=r}Z.prototype._getTag=function(e){return e.match(new RegExp("(?<=<)|([^/s]+)(?=>)","g"))[2]};Z.prototype._bindReplace=function(e,i){for(let r in e)if(e.hasOwnProperty(r)){let t=new RegExp(`{{${r}}}`,"g");t&&(i=i.replace(t,`${e[r]}`))}return i};Z.prototype._toElement=function(e,i){let r=document.createElement("template");return r.innerHTML=e,r.content.children[0]};Z.prototype.createElement=function(){let e=this.template,i=this.data,r=this.isConvert;if(i){if(i instanceof Array){let t=typeof e=="string",n=t?this._getTag(e):e.tagName;e=t?e:e.outerHTML;let s=[];for(let a=0;a<i.length;a++){let h=i[a],u=this._bindReplace(h,e),f=this._toElement(u,n);r&&(f=f.outerHTML),s.push(f)}return s}else if(i instanceof Object){let t=typeof e=="string",n=t?this._getTag(e):e.tagName;e=t?e:e.outerHTML;let s=this._bindReplace(i,e),a=this._toElement(s,n);return r&&(a=a.outerHTML),a}}else{let n=typeof e=="string"?this._getTag(e):e.tagName;return this._toElement(e,n)}};Te.exports=Z});var ue=A((gi,Ce)=>{Ce.exports=class{constructor(e=[],i){this.html=i||document,this.cf=e,this.duration=300}animate(e){return this.config=this.parse(this.cf),new Promise(i=>{for(let r=0;r<this.config.length;r++){let t=this.config[r],{element:n}=t;if(!t[e]){i();break}let s=t[e];if(!s.options&&!(s.options&&s.options.duration)&&(s.options={duration:this.duration}),!s.keyframes&&!n)continue;let a=s.keyframes,h=0,u=[];for(let p=0;p<a.length;p++){let g=a[p];switch(!0){case typeof g=="string":u.push(this.dic(g));break;case g instanceof Object:{let{name:m,offset:c}=g;if(m&&c){let d=this.dic(m);d[d.length-1].offset=c,u.push(d)}else u.push(g)}}}a=u,u=null;let f=()=>{let p=a[h],g=n.animate(p,s.options||this.duration);g.finished?g.finished.then(()=>{h<a.length-1?(h+=1,f()):(a=[],i())}):g.onfinish=()=>{h<a.length-1?(h+=1,f()):(a=[],i())}};f()}})}parse(e){let i=[],r=e.length,t=-1;for(;++t<r;){let n=e[t],s=n.selector,a;switch(!0){case!!(s.val&&s.attr):a=this.html.querySelectorIncluded(`[${s.attr}=${s.val}]`,s.attr,s.val);break;case!!(s.val&&!s.attr):{let h=s.val.match(new RegExp("^[.]"))?"class":s.val.match(new RegExp("^[#]"))?"id":null,u=h?s.val.slice(1):null;a=this.html.querySelectorIncluded(s.val,h,u)}break}n.element=a,i.push(n)}return i}dic(e){return{slideOutUp:[{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1"},{transform:"translate3d(0,100%,0)",visibility:"hidden",opacity:"0"}],slideOutRight:[{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1"},{transform:"translate3d(100%,0,0)",visibility:"hidden",opacity:"0"}],slideOutLeft:[{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1"},{transform:"translate3d(-100%,0,0)",visibility:"hidden",opacity:"0"}],slideOutDown:[{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1",easing:"ease-out"},{transform:"translate3d(0,-100%,0)",visibility:"hidden",opacity:"0",easing:"ease-out"}],slideInUp:[{transform:"translate3d(0,100%,0)",visibility:"hidden",opacity:"0",easing:"ease-out"},{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1",easing:"ease"}],slideInRight:[{transform:"translate3d(100%,0,0)",visibility:"hidden",opacity:"0"},{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1"}],slideInLeft:[{transform:"translate3d(-100%,0,0)",visibility:"hidden",opacity:"0",easing:"ease-out"},{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1"}],slideInDown:[{transform:"translate3d(0,-100%,0)",visibility:"hidden",opacity:"0"},{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1"}],disappear:[{opacity:"1"},{opacity:"0"}],appear:[{opacity:"0"},{opacity:"1"}],flipInX:[,{offset:0,backfaceVisibility:"visible"},{transform:"perspective(400px) rotate3d(1,0,0,90deg)",opacity:"0",offset:0},{transform:"perspective(400px) rotate3d(1,0,0,-20deg)",offset:.4,easing:"ease-in"},{offset:.6,opacity:"1",transform:"perspective(400px) rotate3d(1,0,0,10deg)"},{transform:"perspective(400px) rotate3d(1,0,0,-5deg)",offset:.8},{offset:1,backfaceVisibility:"visible",transform:"perspective(400px) rotate3d(1,0,0,0)"}]}[e.trim()]||[]}}});var Y=A((mi,qe)=>{var ut=B();qe.exports=function(){function e(c){return c?c.constructor.name.toLowerCase():null}function i(c,d){for(let y in c)c.hasOwnProperty(y)&&d(c[y],y)}function r(c,d,y){c=Object.assign(c,{[y]:d})}function t(c){return c===null}function n(c){return c===void 0}function s(c){return e(c)=="array"}function a(c){return e(c)=="object"}var h=function(c,d){for(var y=null,b=0;b<c.length;b++){var v=c[b];if(e(d)=="object"){var w=d,S=Object.keys(d)[0],O=w[S];if(e(v)=="object"){var _=v[S]==O;if(_){y=b;break}}}else if(e(d)!="array"){var _=d==v;if(_){y=b;break}}}return y},u=function(c,d){var y=null,b=e(d);if(b=="object"){var v=Object.keys(d)[0];c[y]!=null&&c[y]==d[v]&&(y=v)}else b=="string"&&(y=d);return y},f=function(c,d){var y=null;return e(c)=="array"?y=h(c,d):e(c)=="object"&&(y=u(c,d)),y},p=class{constructor(c,d,y){this.type=c,this.name=`${ut.instanceID()}-${d}`,this.child=y,this.cache={},e(this.child)=="string"&&(this.child=y=="array"?[]:y=="object"?{}:!1)}init(c){return this[this.type]?(this[this.type](c),!0):!1}open(){if(this.type=="session"){var c=JSON.parse(sessionStorage[this.name]);return c[this.name]}else if(this.type=="local"){var c=JSON.parse(localStorage[this.name]);return c[this.name]}else return this.cache[this.name]}close(c){return this.child=c,this.recache(),this.init(!0)}recache(){this.cache[this.name]=this.child}create(){this.cache[this.name]=this.child}array(){this.create()}object(c){this.create()}session(c){c||this.recache();try{!sessionStorage[this.name]&&!c?sessionStorage.setItem(this.name,JSON.stringify(this.cache)):c&&sessionStorage.setItem(this.name,JSON.stringify(this.cache))}catch{this.recache()}}local(c){c||this.recache();try{!localStorage[this.name]&&!c?localStorage.setItem(this.name,JSON.stringify(this.cache)):c&&localStorage.setItem(this.name,JSON.stringify(this.cache))}catch{this.recache()}}},g={create:function(c,d){if(s(c)){let y=new Set(c);e(d)=="array"?d.forEach(b=>{y.add(b)}):y.add(d),c=Array.from(y)}else a(c)&&(a(d)?i(d,function(y,b){c[b]=y}):c[d]=d);return c},createOrUpdate:function(c,d){var y=f(c,d);return e(c)=="array"?t(y)?c.includes(d):c[y]=d:e(c)=="object"&&(t(y)?a(d)?i(d,function(b,v){r(c,b,v)}):c[d]=d:c[y]=d),c},remove:function(c,d){if(e(d)=="string"){var y=f(c,d);if(e(c)=="object")delete c[y];else if(e(c)=="array"){for(var b=[],v=0;v<c.length;v++)if(v!=y)b.push(c[v]);else continue;c=b}return c}else{if(e(d)=="object")return Object.filter(c,function(w,S){var O=d[S]!=null&&d[S]==w;return!O});if(e(d)=="array")return Object.filter(c,function(w,S){var O=d.contains(S);return!O})}if(t(y))return!1},get:function(c,d){var y=e(d);if(y=="string"){var b=f(c,d);if(b==0||b)return c[b]}else{if(y=="object")return Object.filter(c,function(v,w){var S=!n(d[w])&&d[w]==v;return S});if(y=="array")return Object.filter(c,function(v,w){var S=d.contains(w);return S})}return null},getNot:function(c,d){var y=e(d);return y=="string"?Object.filter(c,function(b,v){var w=v!=d;return w}):y=="object"?Object.filter(c,function(b,v){return Object.some(d,function(w,S){var O=S==v&&w==b;return!O})}):y=="array"?Object.filter(c,function(b,v){var w=!d.contains(v);return w}):null},getAll:function(c){return c}},m=class{constructor(c){this.name=c.name,this.storageType=c.storage,this.child=c.child||"object";try{e(this.child)=="string"&&(this.child=this.child=="array"?[]:this.child=="object"?{}:null)}catch{this.storageType=="session"?sessionStorage.clear():this.storageType=="local"&&localStorage.clear(),e(this.child)=="string"&&(this.child=this.child=="array"?[]:this.child=="object"?{}:null)}if(!["array","object"].includes(e(this.child)))throw new Error("the child must be an object or array type.");this.storage=new p(this.storageType,this.name,this.child),this.storage.init()}has(c){var d=this.storage.open(),y=f(d,c);return t(y)?!1:y}get(c,d){if(d){var y=this.storage.open();return g.get(y,c)}else return new Promise((b,v)=>{setTimeout(()=>{var w=this.storage.open();b(w)})}).then(b=>g.get(b,c))}getNot(c){var d=this.storage.open();return g.getNot(d,c)}getAll(){var c=this.storage.open();return Promise.resolve(c)}update(c,d){var y=this.storage.open(),b=f(y,c);return b==0||b?(y=g.createOrUpdate(y,data),this.storage.close(y)):!1}createOrUpdate(c){if(arguments.length>1){let b=arguments[0],v=arguments[1];c={[b]:v}}var d=this.storage.open();return d=g.createOrUpdate(d,c),this.storage.close(d)}create(c){var d=this.storage.open();return d=g.create(d,c),this.storage.close(d)}remove(c){var d=this.storage.open();return d=g.remove(d,c),this.storage.close(d)}};return m}});var he=A((yi,Ae)=>{var ht=Y()();Ae.exports=class{constructor(){this.storage=new ht({child:"array",storage:"session",name:"_cake_persistent"})}listen(e){let i="DOMContentLoaded";"deviceready"in document&&(i="deviceready"),window.addEventListener(i,r=>{setTimeout(()=>{this.storage.getAll().then(t=>{if(!!(t&&!t.length))for(let n=0;n<t.length;n++){let s=t[n],a=e[s];a.isConnected=!1,a?!a.isConnected&&a.render.bind(a)():console.error(`component ${a} is not found!`)}})})})}append(e){this.storage.create(e)}remove(e){this.storage.remove(e)}}});var fe=A((bi,Le)=>{Le.exports=class{constructor(e){this.Components=e}listen(){window.addEventListener("hashchange",e=>{let i=this.compare(e);this.find(i,this.notify)})}compare(e){let{oldURL:i,newURL:r}=e,t=null;if(i.length>r.length){let n=new URL(i).hash.substring(1).split("/"),s=new URL(r).hash.substring(1).split("/");for(let a=0;a<n.length;a++)if(!s.includes(n[a])){t=n[a];break}}return t}find(e,i){if(!!e)if(this.Components[e])this.Components[e].isConnected&&i(this.Components[e]);else{let r=setInterval(()=>{this.Components[e]&&(this.Components[e].isConnected&&i(this.Components[e]),clearTimeout(r))},50);setTimeout(()=>{clearTimeout(r)},5e3)}}notify(e){e.fire.destroy()}add(e){let i=location.hash;i.includes(e)||(location.hash=i+"/"+e)}remove(e){let r=location.hash.replace(e,"");location.replace(r)}}});var pe=A((vi,je)=>{je.exports=function(e){class i{constructor(n){this.type=n,this.storage={}}store(n,s){this.storage[n]=s}get options(){if(this.type=="select"||this.type=="virtual"){let n={};for(let s in this.storage){let a=this.storage[s];n[s]=a.options}return n}return!1}get value(){if(this.type=="input"){let n="";for(let s in this.storage)n=this.storage[s].options[0];return n}return!1}get query(){let n={};for(let s in this.storage)n=this.storage[s].query[0]||null;return n}get has(){let n="";for(let s in this.storage)n=this.storage[s].query[0]||null;return n}}let r={};return r.options=t=>{let{options:n,params:s}=t;n||(n=[]);let a=n.length>1;return Promise.all(n.map(u=>{let{control:f,field:p,tbl:g,src:m,schema:c,type:d}=u;return e.fire(m,{tbl:g,field:p,params:s}).then(y=>{if(y=y||[],u.query=y,y=y.map(b=>c(b)),d!="input"){let b=c({});for(let v in b)b.hasOwnProperty(v)&&(b[v]="");y.unshift(b)}return u.options=y,u}).then(y=>{let{type:b,control:v}=y;b||(b="others");let w=new i(b);if(a){let S={};return S[v]||(S[v]=w,S[v].store(v,y)),S}else return w.store(v,y),w})})).then(u=>a?u.reduce((f,p)=>(Object.assign(f,p),f),{}):u[0]).catch(u=>{console.error(u)})},r.plot=t=>{let{data:n,container:s}=t;if(!n&&!s)return;let a=(h,u,f)=>{if(!h){console.info("root is not provided!");return}let p=h.querySelectorAll(`${u}`),g=p.length;if(!g){f(null,n);return}for(let m=0;m<g;m++){let c=p[m],d=c.name,y=n[d],b=f(c,y,m);if(b=="break")break;b!="continue"}};return a(s,"INPUT.input",function(h,u){u!=null&&(h.type=="date"&&(u=new Date(u)=="Invalid Date"?"":new Date(u).toJSON().split("T")[0]),h.value=u)}),setTimeout(()=>{a(s,"SELECT.input:not(.cake-template)",function(h,u){a(h,"OPTION:not(.cake-template)",function(f,p,g){if(f){if(f.value==u)return h.selectedIndex=g,"break"}else console.log(f,p,"provide schema")})})},500),Promise.resolve()},r}});var de=A((wi,Ie)=>{var ft=Y()();Ie.exports=function(e){let i={};class r{constructor(n){this.name=n,this.reactiveData={},this.notify=[],this.install(this.name),this.pKeys={},this.sanitize=function(s){let a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"},h=/[&<>"'/]/ig;return typeof s=="string"?s.replace(h,u=>a[u]||""):s}}registerNotifier(n){this.notify.push(n)}install(){this.session=new ft({child:"object",storage:"session",name:`_cake_${this.name}_cf`})}notifier(n,s){let{value:a,bind:h}=s;return this.reactiveData[n]||(this.reactiveData[n]={}),this.reactiveData[n][h]=a,this.set(h,a)}getInputData(n="json",s){let a=s||this.name,h=JSON.parse(JSON.stringify(this.reactiveData[a]));for(let u in h){let f=h[u];h[u]=this.sanitize(f)}if(n=="json")return h;if(n=="formdata"){let u=new FormData;for(let f in h){let p=h[f];u.append(f,p)}return u}}hook(n,s,a){i[n]||(i[n]={}),i[n][s]||(i[n][s]=[]),i[n][s].push(a)}get(n,s=!1){let a=this.pKeys[n];return s?this.session.get(n,!0):this.session.get(n)}set(n,s){let a=`${this.name}-${n}`,h=this.notify,u=this.name,f=null;return this.pKeys[n]=a,new Promise(async(p,g)=>{n!="password"&&this.session.createOrUpdate(n,s),p()}).then(async()=>{let p=i[this.name];if(p){let g=p[n];g&&g.forEach(m=>{m(s)})}return Promise.all(h.map(g=>g(n,s,f,u).then(()=>{})))})}}return r}});var ge=A((Si,Ne)=>{var ne=B(),pt=Y()(),se=new pt({child:"object",storage:"local",name:"_cake_router_cf"});Ne.exports=function(e,i){let r=[];return class{constructor(t,n){this.unauthRoute=n&&n["401"]||null,this.authRoute={},this.route=this.compile(t),this.prev=null,this.components=e,this.watch(),this.persist(),Object.defineProperty(i.prototype,"$router",{configurable:!0,get:()=>({goTo:this.goTo.bind(this),goBack:this.goBack.bind(this),auth:this.auth.bind(this),logout:this.logout.bind(this),...this.prev}),set(s){}})}authenticate(t){if(this.unauthRoute)try{let n=se.get("role",!0);if(n){if(t){let{role:s,data:a}=n,h=this.authRoute[s];if(h){let{name:u}=h;this.goTo(u)}}}else t||this.logout()}catch{t||this.logout()}}auth(t){if(t){let{role:n,token:s,data:a}=t;se.createOrUpdate("role",{role:n,token:s,data:a})}else{let n=se.get("role",!0);if(n){let s={};return n&&(s=n),s.data&&(s=s.data),s.user&&(s=s.user),s.token=n.token,s}else return"token"}}logout(){try{se.remove("role")}catch{}this.goTo(this.unauthRoute,{replace:!0})}goTo(t,n){try{let a=this.route,{params:h={},replace:u}=n||{},f=null,p=Object.entries(a);for(let m=0;m<p.length;m++){let[c,d]=p[m],{name:y}=d;if(y==t){f=c;break}}if(!f)throw new Error(`${t} is not found in routes`);if(f=="/"){u?location.replace(`${location.origin}${location.pathname}`):window.location=`${location.origin}${location.pathname}`;return}let g;if(f=f.slice(1),h.toString().includes("Object")){let m="";for(let c in h)m+=`${c}=${h[c]}&`;h=m,g=`!/${f}?${h}`}else g=`!/${f}`;if(f=="/"&&(g=""),u){let m=`${location.origin}${location.pathname}#${g}`;ne.isChrome()&&!ne.isFirefox()&&history.replaceState(void 0,void 0,m),location.replace(m)}else{var s=document.createElement("a");s.href=`#${g}`,ne.isChrome()&&!ne.isFirefox()&&history.pushState(void 0,void 0,s.href),s.click()}}catch(a){console.log(a)}}goBack(){return new Promise((t,n)=>{window.history.back(),t()})}persist(){if(!document.hasRouterPersist){let t="DOMContentLoaded";"deviceready"in document&&(t="deviceready"),document.addEventListener(t,n=>{this.parse(),this.notify().then(()=>this.navigate(!0))}),document.hasRouterPersist=!0}}watch(){window.hasRouterPop?this.parse():(window.addEventListener("popstate",t=>{console.log(236,t),this.parse(),this.notify().then(()=>(console.log("notified"),this.clear().then(()=>(console.log("cleared"),this.navigate().then(()=>{console.log("navigated")})))))}),window.hasRouterPop=!0)}compile(t){let n={};for(let s in t){let a=t[s];s=String(s);let h=s.length,u=s;if(["404"].includes(s)){let p=t[s];t[s]={callback:p,name:s}}else u=u.slice(1);u=u.split("/"),u=u.map((p,g)=>{let m=p.includes(":"),c="";if(g==0?c+="^/":c+="/",m?c+="(([^/#?]+?))":c+=p,g==h-1?c+="/?$":c+="",m){let d=p.replace(":","");n[s]||(n[s]={}),n[s].params={[d]:g}}return c}),n[s]&&n[s].params?n[s]={params:n[s].params,regex:new RegExp(u.join("")),...a}:n[s]={regex:new RegExp(u.join("")),...a};let{auth:f}=a;if(f){if(this.authRoute[f])throw new Error(`auth ${f} is found in other route`);this.authRoute[f]=a}}return n.length=Object.keys(t).length,n.keys=Object.keys(t),n}parse(){let t=window.location.hash,n,s;if(t?(n=t.includes("#!/")?2:t.includes("#/")?1:null,t=t.slice(n)):(t="/",n=!0),!n)return;let a=new URL(`http://localhost${t}`),{search:h,pathname:u}=a,f=this.route.keys,p={};h&&new URLSearchParams(h).forEach((m,c)=>{p[c]=m});let g=!1;for(let m=0;m<f.length;m++){let c=this.route[f[m]],{regex:d,components:y,params:b,name:v,overlay:w,display:S,onrender:O}=c;if(b){let $=String(u);$=$.slice(1),$=$.split("/"),Object.entries(b).forEach(C=>{let[j,P]=C;$[P]&&(p[j]=$[P])})}if(d.test(u)){s=v,this.unauthRoute!=v?this.authenticate():this.authenticate(!0),this.prev={components:y,state:p,path:u,name:v,prev:this.prev,overlay:w,display:S,onrender:O},g=!0;break}}if(!g&&this.route["404"]){let m=this.route["404"].callback(),{origin:c,pathname:d}=location;this.route[m]?(m=="/"?m=`${c}${d}`:d.slice(-1)=="/"?m=`${c}${d}#!${m}`:m=`${c}${d}/#!${m}`,location.replace(m)):!!m&&!this.route[m]&&(c.slice(-1)=="/"&&m[0]=="/"&&(m=m.slice(1)),m=`${c}${m}`,location.replace(m))}}navigate(t){if(this.prev){let{components:n,state:s,path:a,name:h,overlay:u,onrender:f}=this.prev;try{if(n.length)return new Promise((p,g)=>{let m=n.length,c=0;if(m){let d=()=>{let y=n[c];n.length>c?(y=this.components[y],y.render({emit:{route:this.prev},...f}).then(()=>{y.await.isConnected?y.await.isConnected&&y.await.isConnected.then(()=>{d()}):d()}).catch(b=>{throw b}),c+=1):p()};d()}else p()})}catch(p){throw console.log(p),new Error(`some of the component in ${JSON.stringify(n)} in path ${a} of router is not found, make sure the it is created`)}}}static pushState(t,n,s){window.history.pushState(t,n,s);let a=Promise.resolve();if(this.prev){let{components:h,state:u,path:f,name:p}=this.prev;a=new Promise((g,m)=>{let c=e.length,d=0;if(c){let y=()=>{let b=e[d];e.length>d?(b=this.components[b],b.fire.destroy(),b.await.destroy.then(()=>{y()})):g(),d+=1};y()}else g()})}return a.then(()=>this.navigate())}clear(){let t=Promise.resolve(),{overlay:n}=this.prev||{};if(n)return t;if(this.prev&&this.prev.prev){let{components:s,state:a,path:h,name:u}=this.prev.prev;return t=new Promise((f,p)=>{let g=s.length,m=0;if(g){let c=()=>{let d=s[m];s.length>m?(d=this.components[d],d.fire.destroy(),d.await.destroy.then(()=>{c()})):f(),m+=1};c()}else f()}),t}return t}pushState(t,n,s){window.history.pushState(t,n,s);let a=Promise.resolve();return this.clear(),a.then(()=>this.navigate())}static subscribe(t){t&&t.constructor.name=="Function"&&r.push(t)}notify(){return Promise.all(r.map(t=>t()))}}}});var F=A(le=>{le.getConfig=function(e,i,r,t,n,s){return t==null?[]:t==n&&i!="bind"?[]:(()=>{let a=[],h=e[s]&&e[s][i]||[];if(h&&h.length)for(let u=0;u<h.length;u++){let f=h[u];f.bind==r&&a.push({...f,component:s})}return a})()};le.updateConfig=function(u,i,r,t,n,s,a,h){if(t!=null&&!(t==n&&i!="bind")){var u=(()=>{let f=u[s]&&u[s][i];if(f&&f.length){let p=[];for(let g=0;g<f.length;g++){let m=f[g];m.bind==r&&(h?m.sel==h:!0)&&Object.assign(m,a)}return p}else return[]})();return u}};le.extendConfig=function(e){let i=[];for(let r=0;r<e.length;r++){let t={},n=e[r];for(let s in n)t[s]=n[s];i.push(t)}return i.reduce((r,t)=>{let{incrementedSels:n}=t;return n&&n.length?n.forEach(s=>{let a={...t};a.incrementedSel=s,r.push(a)}):r.push(t),r},[])}});var Re=A((_i,xe)=>{var V=B(),{getConfig:dt,updateConfig:Oi,extendConfig:gt}=F();xe.exports=function(e){return async function(i,r,t,n,s){s=s||document;let a=dt(e,"attr",i,r,t,n);if(!!a.length)return a=gt(a),Promise.all(a.map(h=>{let u,{hasNegate:f,bind:p,testVal:g,attr:m,ops:c,sel:d,attrkey:y,attrvalue:b,incrementedSel:v,incrementId:w}=h;if(p=V.removeWhiteSpace(p),m=V.removeWhiteSpace(m),v=r.incrementedSel||v,r.incrementedSel?u=r[p]:u=r,i==p){let S=s.querySelectorAll(`[data-attr=${v||d}]:not(.cake-template)`);return Promise.all([...S].map(O=>{let _=!1;return c?(_=V.logTest(u,c,g),f&&(_=!_)):f?_=!u:_=!!u,_?new Promise(($,C)=>{V.timeOut(()=>{b?O.setAttribute(y,!0):O.setAttribute(y),$()},100)}):new Promise(($,C)=>{O.hasAttribute(y)?V.timeOut(()=>{O.removeAttribute(y),$()},100):$()})}))}}))}}});var Be=A(($i,Ue)=>{var me=B(),{getConfig:mt,updateConfig:Pi,extendConfig:yt}=F();Ue.exports=function(e){return async function(i,r,t,n,s){s=s||document;let a=mt(e,"bind",i,r,t,n);if(!!a.length){a=yt(a);for(let h=0;h<a.length;h++){let u=a[h],f,{attr:p,bind:g,sel:m,incrementedSel:c,incrementId:d,incrementedSels:y}=u;c=r.incrementedSel||c,r.incrementedSel?f=r[g]:f=r;let b=p.toHyphen();if(i==g){let v=s.querySelectorAll(`[data-bind=${c||m}]`);for(let w=0;w<v.length;w++){let S=v[w];p=="class"||p=="className"?S.classList.length?(me.splitBySpace(t,function(O){S.classList.remove(O)}),me.splitBySpace(f,function(O){S.classList.add(O)})):me.splitBySpace(f,function(O){S.classList.add(O)}):(f!=null||f!=null)&&(S.setAttribute(b,f),S[p]=f)}}}}}}});var Me=A((Ti,He)=>{var Q=B(),{getConfig:bt,updateConfig:Ei,extendConfig:vt}=F();He.exports=function(e){return async function(i,r,t,n,s){s=s||document;let a=bt(e,"class",i,r,t,n);if(!a.length)return;let h={};a=vt(a);for(let u=0;u<a.length;u++){let f=a[u],p,{hasNegate:g,bind:m,testVal:c,className:d,ops:y,sel:b,incrementedSel:v,incrementId:w}=f;if(m=Q.removeWhiteSpace(m),v=r.incrementedSel||v,r.incrementedSel?p=r[m]:p=r,i==m){h[v||b]||(h[v||b]=s.querySelectorAll(`[data-class=${v||b}]:not(.cake-template)`));let S=h[v||b];for(let O=0;O<S.length;O++){let _=S[O],$=!1;y?($=Q.logTest(p,y,c),g&&($=!$)):g?$=p==c:$=!!p,$?Q.splitBySpace(d,function(C){Q.toArray(_.classList).includes(C)||setTimeout(()=>{_.classList.add(C)})}):Q.splitBySpace(d,function(C){Q.toArray(_.classList).includes(C)&&setTimeout(()=>{_.classList.remove(C)})})}}}}}});var De=A((Ci,Fe)=>{var wt=J();Fe.exports=function(e){return async function(i){let{vItems:r,configs:t,newValue:n}=i,s=[];for(let a=0;a<t.length;a++){let h=t[a],u=h.children;if(!!u)for(let f=0;f<u.length;f++){let p=u[f];if(!e[h.component])continue;let g=e[h.component].for.find(m=>m.sel==p);g&&s.push(new Promise(m=>{let{bind:c,sel:d,iter:y,ins:b}=g;setTimeout(()=>{let v=document.querySelectorAll(`[data-for=${d}-active]`);for(let w=0;w<v.length;w++){let S=v[w],O=S.dataset.forAutoBindKey,_=S.dataset.forAutoBindValue,$=n.find(P=>P[O]==_),C=c.split(".")[c.split(".").length-1],j=$[C].length&&$[C].map(P=>P instanceof Object?P:{[y]:P});if(j)for(let P=0;P<j.length;P++){let R=j[P],I=S.cloneNode(!0),q=new wt(R,I,!1).createElement();q.style.removeProperty("display"),q.classList.remove("cake-template"),q.removeAttribute("data-for-template"),S.insertAdjacentElement("beforebegin",q)}S.parentElement.tagName=="SELECT"&&(S.parentElement.selectedIndex=0)}m()})}))}}return Promise.all(s)}}});var Je=A((Li,We)=>{var qi=B(),St=ie(),kt=J(),{getConfig:Ot,updateConfig:_t,extendConfig:Ai}=F();We.exports=function({st:e,logicalType:i}){return async function(r,t,n,s,a){a=a||document;let h=Ot(e,"forUpdate",r,t,n,s);if(!h.length)return;let u=[];for(let f=0;f<h.length;f++){let{bind:p,sel:g,iter:m,ins:c,targets:d}=h[f];for(let y in t)if(t.hasOwnProperty(y)){let b=document.querySelectorAll(`[data-for-update-bind=${y}]`);for(let v=0;v<b.length;v++){let w=b[v],S=w.dataset.forUpdateBind;if(!w.dataset.forTemplate)w.remove();else{let O=w.cloneNode(!0);O.style.removeProperty("display"),O.classList.remove("cake-template");let _=t[S],$=-1;for(l=_.length;++$<l;){let C=_[$],j=$;for(let R=0;R<i.length;R++){let I=i[R],q=new St(w).querySelectorAllIncluded(`[data-${I}]`);for(let N=0;N<q.length;N++){let U=q[N];if(U.dataset[I]){let H=U.dataset[I],M=`${H}-${j}`;O.dataset[I]=M;let{bind:D}=this.getWatchItemsBySel(s,I,H);if(D.includes(".")){S=D.split(".")[0];for(let ee in C){let oe=C[ee],z=`${S}.${ee}`;C[z]=oe}}H&&u.push({_type:I,...C,incrementedSel:M,sel:H,bind:D,incrementId:j,component:s})}}}let P=new kt(C,O,!1).createElement();P.classList.remove("cake-template"),P.removeAttribute("data-for-template"),w.insertAdjacentElement("beforebegin",P),w.parentElement.tagName=="SELECT"&&(w.parentElement.selectedIndex=0)}}}}}return Promise.all(u.map(f=>{let{bind:p,_type:g,component:m,incrementedSel:c,sel:d}=f,y=`notify${g.toProper()}`;return _t(g,p,f,null,m,{incrementedSel:c},d),this[y](p,f,null,m)})).then(()=>{})}}});var Ge=A((xi,Xe)=>{var ji=B(),Ke=J(),{getConfig:ze,updateConfig:Ii,extendConfig:Ni}=F();Xe.exports=function(e){return async function(i,r,t,n,s){return new Promise((a,h)=>{try{let u=ze(e,"for",i,r,t,n),f=ze(e,"switch",i,r,t,n);if(!u.length)return;let p=r.reduce((g,m)=>(g.push(m),g),[]);for(let g=0;g<u.length;g++){let{bind:m,sel:c,iter:d,ins:y,component:b,cleaned:v}=u[g];s=Cake.Components[b].html;let w=s.querySelectorIncluded(`[data-for-template=${c}]`),S=w.cloneNode(!0);p=p.map(O=>{for(let _ in O)O.hasOwnProperty(_)&&(O[`${d}.${_}`]=O[_]);return O}),(()=>{let O=-1;l=p.length,p.forEach((_,$)=>{let C=w.cloneNode(!0);(()=>{if(f&&!f.length)return;let[{bind:R,map:I,sel:q,cases:N}]=f,U=_[I],H=C.querySelector(`[data-switch=${q}]`),M=N.find(K=>K.bind.includes(U)),D=S.querySelector(`[data-case=${q}-${M._id}]`);D.classList.remove("cake-template"),H.innerHTML=D.outerHTML})();let j=new Ke(_,C,!1).createElement();j.style.removeProperty("display"),j.classList.remove("cake-template"),j.removeAttribute("data-for-template"),w.insertAdjacentElement("beforebegin",j),(()=>{let[{children:R}]=u;!R||R.forEach(I=>{let q=j.querySelector(`[data-for=${I}]`);if(q){let N=q.dataset.forAutoBindKey,U=q.dataset.forAutoBindValue,H=q.dataset.forIter,M=_[H];if(M)for(let K=0;K<M.length;K++){let ee=M[K],oe=q.cloneNode(!0),z=new Ke(ee,oe,!1).createElement();z.style.removeProperty("display"),z.classList.remove("cake-template"),z.removeAttribute("data-for-template"),q.insertAdjacentElement("beforebegin",z)}let D=q.closest("SELECT");D&&(D.selectedIndex=0)}})})();let P=j.querySelectorAll("[data-src]");if(P)for(let R=0;R<P.length;R++){let I=P[R];I.src=I.dataset.src,I.removeAttribute("data-src")}}),v&&w.remove(),a()})()}}catch(u){h(u)}})}}});var Qe=A((Ui,Ye)=>{var Pt=B(),{getConfig:$t,updateConfig:Ri,extendConfig:Et}=F();Ye.exports=function(e){return async function(i,r,t,n,s){s=s||document;let a=$t(e,"if",i,r,t,n);if(!a.length)return;a=Et(a);let h={};for(let u=0;u<a.length;u++){let f=a[u],{attr:p,bind:g,sel:m,testval:c,_true:d,_false:y,ops:b,hasNegate:v,incrementedSel:w,incrementId:S}=f,O=p.toHyphen(),_=d!="null",$=y!="null";if(i==g){h[m]||(h[m]=s.querySelectorAll(`[data-if=${w||m}]:not(.cake-template)`));let C=h[m];for(let j=0;j<C.length;j++){let P=C[j],R=r,I;if(c?I=Pt.logTest(c,b,R):I=v?!R:!!R,I){if(_)if(p=="class"){let q=d.split(" ");$?(y.split(" ").forEach(U=>{P.classList.remove(U)}),q.forEach(U=>{P.classList.add(U)})):q.forEach(N=>{P.classList.contains(N)||P.classList.add(N)})}else R[d]&&P.setAttribute(p,R[d])}else if($)if(p=="class"){let q=y.split(" ");_?(d.split(" ").forEach(U=>{P.classList.remove(U)}),q.forEach(U=>{P.classList.add(U)})):trueClasses.forEach(N=>{P.classList.contains(N)||P.classList.add(N)})}else P.setAttribute(p,y)}}}}}});var Ve=A((Fi,Ze)=>{var Bi=B(),{getConfig:Tt,updateConfig:Hi,extendConfig:Mi}=F();Ze.exports=function(e){return async function(i,r,t,n,s){s=s||document;let a=Tt(e,"input",i,r,t,n);if(!!a.length)for(let h=0;h<a.length;h++){let u=a[h],{attr:f,bind:p,sel:g}=u,m=f.toHyphen();if(i==p){let c=s.querySelectorAll(`[data-input=${g}]`);for(let d=0;d<c.length;d++){let y=c[d];f=="className"?t?r?y.classList.replace(t,r):y.classList.remove(t):y.classList.add(r):(y.setAttribute(m,r),y[f]=r)}}}}}});var it=A((Ji,tt)=>{var Di=B(),Ct=J(),{getConfig:qt,updateConfig:et,extendConfig:Wi}=F();tt.exports=function({st:e,logicalType:i}){return async function(r,t,n,s,a){a=a||document;let h=qt(e,"switch",r,t,n,s);if(!h.length)return;let u=[];for(let f=0;f<h.length;f++){let p=h[f],{bind:g,sel:m,map:c,cases:d}=p,y=a.querySelectorAll(`[data-switch-slot=${m}]`);for(let b=0;b<t.length;b++){let v=b,w=t[b],S=y[b],O=S.dataset.index,_=w[c];if(_!=null){let $=null;for(let C=0;C<d.length;C++)if(d[C].bind.split("|").includes(_)){$=d[C];break}if($){let{_id:C,bind:j}=$,P=document.querySelector(`[data-case=${m}-${C}]`);if(P&&P.toString().includes("Element")){P=P.cloneNode(!0);let R=P.querySelectorAll("[data-for-auto=true]");for(let q=0;q<R.length;q++){let N=R[q];N.dataset.for=`${N.dataset.for}-active`}P.removeAttribute("data-case");let I=new Ct(w,P,!1).createElement();for(let q=0;q<i.length;q++){let N=i[q];if(P.dataset[N]){let U=P.dataset[N],H=`${U}-${v}`;I.dataset[N]=H;let{bind:M}=this.getWatchItemsBySel(s,N,U);U&&u.push({_type:N,...w,incrementedSel:H,sel:U,component:s,bind:M,incrementId:v})}}I.classList.remove("cake-template"),S.replaceWith(I)}}}}}return Promise.all(u.map(f=>{let{bind:p,_type:g,component:m,incrementedSel:c,sel:d}=f,y=`notify${g.toProper()}`;return et(e,g,p,f,null,m,{incrementedSel:c},d),this[y](p,f)})).then(()=>{let f=u.reduce((p,g)=>{let{sel:m,incrementedSel:c,bind:d}=g;return p[m]||(p[m]={data:g,incrementedSels:[]}),p[m].incrementedSels.push(c),p},{});for(let p in f)if(f.hasOwnProperty(p)){let g=f[p],{data:m,incrementedSels:c}=g,{_type:d,bind:y,component:b,sel:v}=m;et(e,d,y,m,null,b,{incrementedSels:c},v)}})}}});var nt=A((Xi,rt)=>{var Ki=B(),{getConfig:At,updateConfig:zi,extendConfig:Lt}=F();rt.exports=function(e){return async function(i,r,t,n,s){s=s||document;let a=At(e,"toggle",i,r,t);if(!!a){a=Lt(a),s=s||document;for(let h=0;h<a.length;h++){let u=a[h];if(!u)continue;let{sel:f,bind:p,value:g,ops:m}=u,c=s.querySelector(`[data-toggle=${f}]`);g==t&&c&&c.classList.remove("is-active"),g==r&&c&&(c.classList.contains("is-active")&&c.classList.remove("is-active"),c&&c.classList.add("is-active"))}}}}});var ye=A((Gi,lt)=>{var jt=B(),It=Re(),Nt=Be(),xt=Me(),Rt=De(),Ut=Je(),Bt=Ge(),Ht=Qe(),Mt=Ve(),Ft=it(),Dt=nt(),L={},st=["if","bind","switch","toggle","class","attr"];function E(){this.uiid=0,this.notify={}}E.prototype.notifyFor=Bt(L);E.prototype.notifySwitch=Ft({st:L,logicalType:st});E.prototype.notifyForAuto=Rt(L);E.prototype.notifyForUpdate=Ut({st:L,logicalType:st});E.prototype.notifyClass=xt(L);E.prototype.notifyBind=Nt(L);E.prototype.notifyAttr=It(L);E.prototype.notifyIf=Ht(L);E.prototype.notifyInput=Mt(L);E.prototype.notifyToggle=Dt(L);E.prototype.notifier=function(e,i,r,t){let n=i;jt.isObject(n)&&(n=JSON.parse(JSON.stringify(i)));let s={for:"For",forUpdate:"ForUpdate",toggle:"Toggle",bind:"Bind",input:"Input",if:"If",class:"Class",attr:"Attr"},a=Object.caching("AttribProp").get(e)||(()=>{let h={},u=Object.keys(s),f=L[t];if(!f)return[];for(let p=0;p<u.length;p++){let g=u[p],m=f[g];if(m)for(let c=0;c<m.length;c++){let d=m[c],{bind:y}=d;y==e&&(h[g]=!0)}}return h=Object.keys(h),Object.caching("AttribProp").set(e,h),h})();return new Promise((h,u)=>{try{let f=a.length,p=0,g=()=>{if(f>p){let m=a[p],c=s[m];p+=1,this[`notify${c}`](e,n,r,t).then(()=>{g()})}else h()};g()}catch(f){u(f.message)}})};E.prototype.registerNotifier=function(e,i){this.notify[e]||(this.notify[e]=[]),this.notify[e].push(i)};E.prototype.getEventTarget=function(e){let i=`${e}`,r=Object.caching("getEventTarget").get(i);if(!r){let t=L[e];r=t&&t.evt?t.evt:[],Object.caching("getEventTarget").set(i,r)}return r};E.prototype.getRouterTarget=function(e){let i=`${e}`,r=Object.caching("getRouterTarget").get(i);if(!r){let t=L[e];r=t&&t.router?t.router:[],Object.caching("getRouterTarget").set(i,r)}return r};E.prototype.getWatchItems=function(e){let i=`${e}`,r=Object.caching("getWatchItems").get(i);if(!r){let t=L[e]||{},n=new Set;for(let s in t)if(t.hasOwnProperty(s)){let a=t[s];for(let h=0;h<a.length;h++){let u=a[h],{bind:f}=u;if(f)n.add(f);else continue}}r=[...n],Object.caching("getWatchItems").set(i,r)}return r};E.prototype.getConfig=function(e){return L[e]};E.prototype.getWatchItemsByType=function(e,i){let r=`${e}-${i}`,t=Object.caching("getWatchItemsByType").get(r);if(!t){let s=(L[e]||{})[i]||[],a=new Set;for(let h=0;h<s.length;h++){let u=s[h],{bind:f}=u;switch(!!f){case!0:a.add(f);break;default:switch(!0){case(i=="animate"||i=="toggle"):(a.constructor.name="Set")&&(a=[]),a.push(u)}}}t=[...a],Object.caching("getWatchItemsByType").set(r,t)}return t};E.prototype.getWatchItemsBySel=function(e,i,r){let t=`${e}-${i}-${r}`,n=Object.caching("watchItemsBySel").get(t);if(!n){let a=L[e][i].find(h=>h.sel==r);n=a||!1,Object.caching("watchItemsBySel").set(t,n)}return n};E.prototype._activateReactive=e=>{};E.prototype._register=function(e,i,r,t){switch(!0){case!e[i]:e[i]={};case!e[i][r]:e[i][r]=[];default:e[i][r].push(t);break}};E.prototype._static=function(e){return function(i,r){let t=[];for(let n=0;n<i.length;n++){let s=i[n];switch(r){case!1:t.push(s);break;case!0:{let a=s.closest("[data-component]");switch(a=a&&a.dataset.component,a==e){case!0:t.push(s);break}}break;default:continue}}return t}};E.prototype._compileEvents=function(e,i,r){return new Promise(t=>{if(!e.length){t();return}let n=this._static(i)(e,r);if(!n.length){t();return}for(let s=0;s<n.length;s++){let a=`cke${this.uiid}`,h=n[s],u=h.dataset.event.split(" ").join("").split(",");for(let f=0;f<u.length;f++){let[p,g]=u[f].split(":");this._register(L,i,"evt",{event:p,sel:a,cb:g}),h.dataset.event=a,this.uiid++}}t()})};E.prototype._compileToggle=function(e,i,r){return new Promise(t=>{if(!e.length){t();return}if(!this._static(i)(e,r).length){t();return}let s={};for(let a=0;a<e.length;a++){let h=`ckt${this.uiid}`,u=e[a],f=u.dataset.toggle;s[f]&&(h=s[f]),this._register(L,i,"toggle",{sel:h,name:"ns-"+f}),u.dataset.toggle=h,this.uiid++,s[f]=h}s={},t()})};E.prototype._compileFor=function(e,i,r,t){return new Promise(n=>{let s=t;if(!e.length){n();return}let a=this._static(i)(e,r);if(!a.length){n();return}let h={};for(let u=0;u<a.length;u++){let f=`ckf${this.uiid}`;h[f]={};let p=a[u],g=p.dataset.for,m=p.dataset.forAutoBind,c=p.dataset.forCleaned=="true",[d,y,b]=g.split(" ");if(m){let v=p.dataset.forIter,w=m.split(":"),S=w[0]&&w[0].trim(),O=w[1]&&w[1].trim();h[f]={iteration:v},p.dataset.forAutoBindKey=S,p.dataset.forAutoBindValue=O,p.removeAttribute("data-for-auto-bind")}if(p.style.display="none",p.classList.add("cake-template"),p.dataset.for=f,p.dataset.forTemplate=f,h[f]=Object.assign(h[f],{bind:b,sel:f,iter:d,ins:y,cleaned:c}),++this.uiid,u!=0){let v=p.parentElement&&p.parentElement.closest("[data-for]");if(!v)continue;let w=!!v.dataset.for;if(s.contains(v)&&w){let S=v.dataset.for,O=h[S];O&&!O.children?O.children=[f]:O&&O.children.push(f)}}}for(let u in h)h.hasOwnProperty(u)&&this._register(L,i,"for",h[u]);n()})};E.prototype._compileForUpdate=function(e,i,r){return new Promise(t=>{if(!e.length){t();return}let n=this._static(i)(e,r);if(!n.length){t();return}for(let s=0;s<n.length;s++){let a=`ckfu${this.uiid}`,h=n[s],u=h.dataset.forUpdate;h.style.display="none",h.classList.add("cake-template"),h.dataset.forUpdate=a,h.dataset.for||(h.dataset.forTemplate=a);let[f,p,g]=u.split(" ");this._register(L,i,"forUpdate",{bind:g,sel:a,iter:f,ins:p}),this.uiid++}t()})};E.prototype._compileSwitch=function(e,i,r){return new Promise(t=>{if(!e.length){t();return}let n=this._static(i)(e,r);if(!n.length){t();return}for(let h=0;h<n.length;h++){let u=`cks${this.uiid}`,f=n[h],p=f.dataset.switch,g="def";if(p.includes(".")){var[s,...a]=f.dataset.switch.split(".");p=s,g=a[0]}f.dataset.switch=u;let m=f.querySelectorAll("[data-case]"),c=[];for(let d=0;d<m.length;d++){let y=m[d],b=y.closest(`[data-switch=${u}]`);if(y.classList.add("cake-template"),b){let v=y.dataset.case,w=`cksc${this.uiid}`;y.dataset.case=`${u}-${w}`,c.push({_id:w,bind:v}),this.uiid++}}this._register(L,i,"switch",{bind:p,sel:u,map:g,cases:c}),this.uiid++}t()})};E.prototype._compileBind=function(e,i,r){return new Promise(t=>{if(!e.length){t();return}let n=this._static(i)(e,r);if(!n.length){t();return}for(let h=0;h<n.length;h++){let u=`ckm${this.uiid}`,f=n[h],g=f.dataset.bind.split(",");for(let m=0;m<g.length;m++){let c=g[m].split(" ").join("");if(c.includes(":"))var[s,a]=c.split(":");else var a=c,s="value";this._register(L,i,"bind",{attr:s,bind:a,sel:u})}this.uiid++,f.dataset.bind=u}t()})};E.prototype._compileAnimate=function(e,i,r){return new Promise(t=>{if(!e.length){t();return}let n=this._static(i)(e,r);if(!n.length){t();return}for(let s=0;s<n.length;s++){let a=`cka${this.uiid}`,h=n[s],u=h.dataset.animate;u=u.split(" ").join("");let f={},p=u.split(",");for(let g=0;g<p.length;g++){let m=p[g],[c,d]=m.split(":");if(c=="ns"){f.ns=d;break}else f[c]={keyframes:d.split("-")}}f.selector={attr:"data-animate",val:a},this._register(L,i,"animate",f),this.uiid++,h.dataset.animate=a}t()})};E.prototype._compileIf=function(e,i,r){return new Promise(t=>{if(!e.length){t();return}let n=this._static(i)(e,r);if(!n.length){t();return}let s=new RegExp("<|>|===|==|!==|!=");for(let a=0;a<n.length;a++){let h=`ci${this.uiid}`,u=n[a],f=u.dataset.if,p=u.dataset.ifBind,g=f.split(",");for(let m=0;m<g.length;m++){let c=g[m],d=c.substring(0,c.indexOf("=")),y=c.substring(c.indexOf("=")+1,c.length);y=y.split(new RegExp("[()]")).join("");let[b,v]=y.split("?"),w=b[0]=="!";hasRegularLog=b.match(s);let S,O,_;if(hasRegularLog){let j=b.split(s);S=j[0].trim(),O=j[1].trim(),_=hasRegularLog[0]}else S=b;w&&(S=S.slice(1));let[$,C]=v.split(":");this._register(L,i,"if",{hasNegate:w,attr:d,ops:_,bind:S,testval:O||null,_true:$,_false:C,sel:h,ifBind:p})}this.uiid++,u.dataset.if=h}t()})};E.prototype._compileClass=function(e,i,r){return new Promise(t=>{if(!e.length){t();return}let n=this._static(i)(e,r);if(!n.length){t();return}let s=new RegExp("<|>|===|==|!==|!=");for(let a=0;a<n.length;a++){let h,u,f,p,g,m,c,d,y;h=`cc${this.uiid}`,u=n[a],f=u.dataset.class;let[b,v]=f.split("&&");if(b=b.trim(),v=v.trim(),p=b.match(s),b.substring(0,2).includes("!")?(g=!0,y=b.substring(0,2)=="!!"?2:b.substring(0,1)=="!"?1:0):(g=!1,y=0),p){let w=b.split(s);m=w[0].trim(),d=w[1].trim(),c=p[0].trim()}else!g&&(m=b),g&&(m=b.substring(y),d=y==2);this._register(L,i,"class",{hasNegate:g,bind:m,testVal:d,className:v,ops:c,sel:h}),this.uiid++,u.dataset.class=h}t()})};E.prototype._compileAttr=function(e,i,r){return new Promise(t=>{if(!e.length){t();return}let n=this._static(i)(e,r);if(!n.length){t();return}let s=new RegExp("<|>|===|==|!==|!=");for(let a=0;a<n.length;a++){let h,u,f,p,g,m,c,d;h=`cre${this.uiid}`,u=n[a],f=u.dataset.attr;let[y,b]=f.split("&&");b=b.trim();let[v,w]=b.split("=");if(y=y.trim(),p=y.match(s),g=y[0]=="!",p){let S=y.split(s);bind=S[0],d=S[1],c=p[0]}else bind=y;g&&g&&(bind=bind.slice(1)),this._register(L,i,"attr",{hasNegate:g,bind,testVal:d,attrkey:v,attrvalue:w,ops:c,sel:h}),this.uiid++,u.dataset.attr=h}t()})};E.prototype._compileRouter=function(e,i,r){return new Promise(t=>{if(!e.length){t();return}let n=this._static(i)(e,r);if(!n.length){t();return}for(let s=0;s<n.length;s++){let a=`rt${this.uiid}`,h=n[s],u=h.dataset.routerLink;this._register(L,i,"router",{value:u,sel:a}),this.uiid++,h.dataset.routerLink=a}t()})};E.prototype._compileInput=function(e,i,r){return new Promise(t=>{if(!e.length){t();return}let n=this._static(i)(e,r);if(!n.length){t();return}for(let h=0;h<n.length;h++){let u=`cknt${this.uiid}`,f=n[h],p=f.tagName,m=f.dataset.input.split(",");for(let c=0;c<m.length;c++){let d=m[c].split(" ").join("");if(d.includes(":"))var[s,a]=d.split(":");else var a=d,s="value";this._register(L,i,"input",{attr:s,bind:a,sel:u,nodeType:p})}this.uiid++,f.dataset.input=u}t()})};E.prototype.inject=function(e,i,r=!1){return new Promise(t=>{let n=e.getElementsByDataset("bind","for","for-update","switch","toggle","event","animate","if","class","input","attr");t(n)}).then(t=>{let n=[],s={bind:this._compileBind,switch:this._compileSwitch,toggle:this._compileToggle,if:this._compileIf,class:this._compileClass,attr:this._compileAttr,for:this._compileFor,"for-update":this._compileForUpdate,event:this._compileEvents,animate:this._compileAnimate,input:this._compileInput};for(let a in t)t.hasOwnProperty(a)&&t[a].length&&n.push(s[a].apply(this,[t[a],i,r,e]));return console.timeEnd(i),n.length?Promise.all(n):Promise.resolve()}).then(()=>Promise.resolve())};lt.exports=E});var be=A((Yi,ot)=>{var Wt=ue(),Jt=J(),Kt=ie(),zt=B();function T(e,i,r){this.name=e,this.template=i,this.options=r,this.handlers=r.handlers,this.subscribe=r.subscribe,this.data={},this.root=r.root,this.items=!1,this.type=r.type||"view",this.toggle=r.toggle,this.targets={},this.animateOptions=r.animate,this.role=r.role,this.isReady=!1,this.await={},this.utils=zt,(e=="app"||r.role=="app")&&(this.staticComponent=r.static||[]),this.container={},this.compile=new Promise(t=>{this._bindHandlers(),t()}).then(()=>{this._bindSubscribe()}).then(()=>{switch(this.type=="view"&&!!this.template){case!0:return this.createElementAsync();default:this.isStatic=!1;break}})}T.prototype.isStatic=!1;T.prototype.hasEvent=!1;T.prototype.isConnected=!1;T.prototype.destroyed=!1;T.prototype.isCreated=!1;T.prototype.Subscribe=function(e){this.$observer.registerSubscribe({[e.listenTo]:{[e.original]:[e]}})};T.prototype.Node=function(e){return new Kt(e)};T.prototype._bindHandlers=function(){for(let e in this.handlers)if(this.handlers.hasOwnProperty(e)){let i=this.handlers[e],r=i.name;i=i.bind(this),i.original=r,i.binded=this.name,this.handlers[r]=i,this.initAwaitHandlers(e)}this.await.destroy||(this.await.destroy=Promise.resolve()),this.await.animateRemove||(this.await.animateRemove=Promise.resolve())};T.prototype.initAwaitHandlers=function(e){this.await[e]=Promise.resolve()};T.prototype._bindSubscribe=function(){let e={};for(let i in this.subscribe)if(this.subscribe.hasOwnProperty(i))if(subscribe=this.subscribe[i],!!subscribe.components&&!!subscribe.handler){let t=i,{components:n,handler:s}=subscribe;s=s.bind(this),s.binded=this.name,s.original=t;for(let a=0;a<n.length;a++){let h=n[a];e[h]||(e[h]={}),e[h][t]||(e[h][t]=[]),s.listenTo=h,e[h][t].push(s)}}else{e[i]||(e[i]={});let t=subscribe;for(let n in t)if(t.hasOwnProperty(n)){let s=t[n],a=s.name;try{s=s.bind(this)}catch{}s.original=a,s.binded=this.name,s.listenTo=i,e[i][a]||(e[i][a]=[]),e[i][a].push(s)}}this.subscribe=e};T.prototype.notifyStaticComponent=function(e,i,r){Cake.Observer.notify(e,i,r,this.staticComponent[e],!0,this.name)};T.prototype.doFor=function(e,i){let r=()=>this.html;i!=null&&this.$attrib.notifyFor(e,i,null,this.name,r())};T.prototype.doToggle=function(e,i){this.$attrib.notifyToggle(e,i,null,this.name,this.html)};T.prototype.doSwitch=function(e,i){this.$attrib.notifySwitch(e,i,null,this.name,this.html)};T.prototype.doIf=function(e,i){this.$attrib.notifyIf(e,i,null,this.name,this.html)};T.prototype.$animate=function(e){let i=this.$attrib.getWatchItemsByType(this.name,"animate"),r=this.animateOptions,t=[];return(()=>{if(!(!i.length&&!(i instanceof Array)||!r))for(let n=0;n<i.length;n++){let s=i[n],{ns:a,selector:h}=s;if(s.ns){if(r[a]){let u=r[a];Object.assign(s,r[a]),delete r[a]}}else t.push(i)}})(),i.length?((()=>{let n={},s={};for(let a in r)r.hasOwnProperty(a)&&(s.val=a,n.selector=s,Object.assign(n,r[a]),i.push(n),n={},s={})})(),new Wt(i,this.html).animate(e)):!1};T.prototype.$templating=function(e,i,r){let t=i||this.template;return new Jt(e,t,r).createElement()};T.prototype.createElement=function(){if(!(this.template.substring(0,1)=="#"))return;let i=this.template.substr(1),r=document.getElementById(i),t=this.isTemplate=r&&r.toString().includes("Template");if(!r)throw new Error(`the template for ${this.name} is not found with.`);return new Promise(n=>{switch(t){case!0:{let s=r.getContent(!0);if(!s)throw new Error(`it might be theres no template in component - ${this.name}`);s.cake_component=this.name,this.html=this.Node(s),this._parseHTML(this.isStatic).then(()=>{this._watchBindedItems(),n()})}break;case null:n();break;default:{let s=r;if(!s)throw new Error(`it might be theres no template in component - ${this.name}`);s.cake_component=this.name,this.html=this.Node(s),this.isStatic=!0,this._parseHTML(this.isStatic).then(()=>{n()})}}})};T.prototype.createElementAsync=function(){return new Promise(e=>{this.createElement().then(()=>{e()})}).then(()=>{this.isReady=!0})};T.prototype._isParsed=!1;T.prototype._parseHTML=function(e=!1){return this.$attrib.inject(this.html,this.name,e).then(()=>{this.original=this.html.cloneNode(),this._isParsed=!0})};T.prototype.render=function(e){let{root:i,multiple:r,cleaned:t,emit:n,static:s,hashed:a,data:h}=e||{},u={emit:n||{}},f=p=>this.data[p]||this.$scope[p]||null;return new Promise((p,g)=>{!!i&&(this.root=i),r&&this._smoothReset(),this.isReady?p():this.createElement().then(()=>(a===!0&&this.$hash.add(this.name),!this.template&&this.fire.isConnected&&this.fire.isConnected(u,!0))).then(()=>{this.isReady=!0,p()})}).then(()=>this.await.destroy.then(()=>this.await.animateRemove).then(()=>new Promise((p,g)=>{let m=this.$attrib.getWatchItemsByType(this.name,"for");for(let c=0;c<m.length;c++){let d=f(m[c]);this.doFor(m[c],d)}p(this.html)}).then(p=>(u={element:p,emit:n},new Promise((g,m)=>{try{this.fire.beforeConnected&&this.fire.beforeConnected(u,!0),g(p)}catch(c){m(c)}}))).then(p=>{if(!this.isStatic)return(h?(()=>new Promise(m=>{let c=p.getElement();c=this.$templating(h,c),this.html=p=this.Node(c),this.html.replaceDataSrc(),h=null,m()}))():Promise.resolve()).then(()=>{p.appendTo(this.root,t),this.isConnected=!0})}).then(()=>this.findTarget()).then(()=>this.findContainer()).then(()=>{}).then(()=>this.addEvent(s,r)).then(()=>{try{return this.fire.isConnected&&this.fire.isConnected(u,!0)}catch(p){console.log(440,p)}}).then(()=>this.$animate("render")).then(()=>new Promise((p,g)=>{setTimeout(()=>{this._watchReactive(),p()},100)}))))};T.prototype.renderAsync=function(e){this.render(e).then(()=>{this.$persist.append(this.name)})};T.prototype._smoothReset=function(){this.isConnected=!1,this.html=this.original.cloneNode()};T.prototype._hardReset=function(e){return this.isConnected=!1,this.$persist.remove(e),this.html=this.original.cloneNode(),!0};T.prototype.reset=function(){let e=this.$animate("remove");return e instanceof Promise?this.await.animateRemove=new Promise(i=>{e.then(()=>this.html.remove()).then(()=>this._hardReset(this.name)).then(()=>{i()})}):new Promise(i=>{this.html.remove(this.name),this._hardReset(this.name),i()})};T.prototype.addEvent=function(e,i){if(!!i&&!!e)return!1;let n=this.name;function s(a,h,u,f){return function(p){u||p.preventDefault(),f&&p.stopPropagation(),Cake.Observer.notify(h,a,p)}}if(!!this.targets){for(let a in this.targets)if(this.targets.hasOwnProperty(a)){let h=this.targets[a];for(let u of h){let{sel:f,el:p,cb:g}=u,m=a,c=a.substring(0,2),d=c.includes("~"),y=c.includes("^");d||y?(m=a.slice(1),g=g||m):g||(g=a),p.Ref().get("__cake__events")||p.Ref().set("__cake__events",{});let b=p.Ref().get("__cake__events");if(!b[g])p.addEventListener(m,s(g,n,d,y),!0),b[g]=!0,p.Ref().set("__cake__events",b);else continue}}}};T.prototype.findTarget=function(){let e=this.$attrib.getEventTarget(this.name),i=JSON.parse(JSON.stringify(e));for(let r of i)r.el=document.querySelector(`[data-event=${r.sel}]`),this.targets[r.event]||(this.targets[r.event]=[]),this.targets[r.event].push(r)};T.prototype.toggler=function(e){let i=this.$attrib.getWatchItemsByType(this.name,"toggle"),r=class{constructor(n,s,a,h){this.toggle=h.toggle,this.bind=n,this.bases=s,this.cache=h.$cache,this.html=a}check(n){let s=this.toggle[n];if(!s)console.error(`${n} is not found in toggle! choose from ${JSON.stringify(Object.keys(this.toggle))}`);else{if(i.length){let{ns:a}=s,h=i.find(u=>u.name==`ns-${a}`);h&&(s.sel=`[data-toggle=${h.sel}]`)}return s}}_toggle(){let n=this.check(this.bind);if(!n)return;let{basis:s="data-name",cls:a="is-active",mode:h="radio",sel:u,persist:f=!0}=n,p=this.html.querySelectorAll(u);if(!p.length)return;let g,m;if(p.length==1){let c=typeof this.bases=="boolean",d=!!this.bases,y=p[0];if(f){let b=function(v,w,S){S?v.classList.contains(w)&&v.classList.remove(w):v.classList.contains(w)||v.classList.add(w)};c?(d?(this.cache.createOrUpdate(this.bind,!0),b(y,a,!0)):(this.cache.createOrUpdate(this.bind,!1),b(y,a,!1)),y.classList.toggle(a)):(this.cache.createOrUpdate(this.bind,!y.classList.contains(a)),y.classList.toggle(a))}}else for(let c=0;c<p.length;c++){let d=p[c],y=d.classList.contains(a),b=d.getAttribute(s);b==this.bases?(h=="switch"?d.classList.toggle(a):y||d.classList.add(a),f&&this.cache.createOrUpdate(this.bind,b),m=b):y&&(d.classList.remove(a),g=d.getAttribute(s))}return{prev:g,next:m}}_recall(){let n=this.check(this.bind);if(!n)return;let{basis:s="data-name",cls:a="is-active",sel:h}=n;return this.cache.get(this.bind).then(u=>{if(!u)return u;let f=u,p=this.html.querySelectorAll(h);if(!!p.length){if(p.length==1){let g=p[0];f&&g.classList.add(a)}else for(let g=0;g<p.length;g++){let m=p[g],c=m.classList.contains(a);m.getAttribute(s)==f&&(c||m.classList.add(a))}return f}})}},t=(n,s)=>new r(n,s,this.html,this)._toggle();return t.recall=n=>new r(n,!1,this.html,this)._recall(),t};T.prototype.findContainer=function(){return new Promise(e=>{let i=this.html.getContainers();for(let r=0;r<i.length;r++){let t=i[r],n=t.dataset.container;n&&(this.container[n]=t)}e()})};T.prototype._watchBindedItems=function(){};T.prototype._watchReactive=function(){if(!this.items.length){this.items=this.$attrib.getWatchItems(this.name);let e=this.name,i=this.$attrib.getWatchItemsByType(this.name,"input")||{input:!1},r=this.$attrib.notify[e];i&&i.forEach(t=>{let{attr:n,bind:s,sel:a,nodeType:h}=t,u=document.querySelector(`[data-input=${a}]`);u&&!u._reactive&&(h=="INPUT"||h=="TEXTAREA"?(r.forEach(f=>{f(e,{value:u.value,bind:s})}),u.addEventListener("input",f=>{r&&r.length&&r.forEach(p=>{p(e,{value:f.target.value,bind:s})})}),u.addEventListener("change",f=>{r&&r.length&&r.forEach(p=>{p(e,{value:f.target.value,bind:s})})})):h=="SELECT"&&((()=>{let{selectedOptions:f}=i,p=[];for(let g=0;g<f.length;g++){let m=f[g],c=m.text,d=m.value;p.push({text:c,value:d})}r&&r.length&&r.forEach(g=>{g(e,{value:p,bind:s})})})(),u.addEventListener("change",f=>{let{selectedOptions:p}=f.target,g=[];for(let m=0;m<p.length;m++){let c=p[m],d=c.text,y=c.value;g.push({text:d,value:y})}r&&r.length&&r.forEach(m=>{m(e,{value:g,bind:s})})})),u._reactive=!0)})}};T.prototype.observer=function(e){function i(r){return this.handler[r]}this.observer=new Observer(this,e,i.bind(this))};T.prototype.variable=function(e){let i=Object.keys(e),r={},t=[];function n(s,a,h){a||(r[s]=`value is not '${h}'`)}for(let s in e)if(e.hasOwnProperty(s)){let a=e[s],{type:h,value:u}=a,f;["string","number"].includes(h)?f=typeof u==h:u instanceof Array?f=h=="array":f=h=="object",t.push(u),n(s,f,h)}if(Object.keys(r).length)throw new Error(JSON.stringify(r));return t};ot.exports=T});var ct=A((Zi,at)=>{var Xt=ye(),ve=de()(),W=be(),Gt=fe(),Yt=ge(),Qt=he(),Zt=Y()(),Vt=ce(),ei=pe(),Qi=B();function k(e){this.componentName=e,this.components={}}k.app=function(e){this.name=e.name||""};k.Components=function(e){return{subscribe(i,r){function t(){let n=k.Components[e];if(n&&i instanceof Function){let s=i.name;r&&(i=i.bind(r)),i.binded="external",i.original=s,i.listenTo=n.name,n.Subscribe(i)}}return new Promise((n,s)=>{let a=setInterval(()=>{k.Components[e]&&(t(),clearInterval(a),n())})})}}};k.Models={};k.Subscribe={};k.Handlers={};k.Attributes=new Xt;k.Models.$loaded=function(e){return new Promise((i,r)=>{let t=setInterval(()=>{k.Models[e]&&(clearInterval(t),i(k.Models[e]))});setTimeout(()=>{k.Models[e]||(clearInterval(t),r(e))},1e4)})};k.MainMessageChannel=function(){let e=new MessageChannel;return{send(i){e.port2.postMessage(i)},receive(i){e.port1.onmessage=function(r){let{isTrusted:t,data:n}=r||{isTrusted:!1};i(t?{status:1,data:n}:{status:0,err:"not trusted!"})}}}}();k.Utils={scopeTrap(e){return!1},scopeNotifier(e){return e}};k.create=function(e,i,r){new k(e,i,r).create(e,i,r)};k.plugin=function(){};k.init=function(e){return new W(e)};k.Hasher=new Gt(k.Components);k.Hasher.listen();k.Router=Yt(k.Components,W);k.Persistent=new Qt;k.Persistent.listen(k.Components);k.Cache=new Zt({name:"cache",storage:"session",child:"object"});k.getSubscriber=function(e,i){let r=k.Subscribe,t={};for(let n in r)if(r.hasOwnProperty(n)){let s=r[n];for(let a in s)if(s.hasOwnProperty(a)){let h=s[a];for(let u of h){let f=u,p=f.original,g=f.binded;if(f.listenTo==e){if(p==i)if(!t[g])t[g]=i;else{let c=t[g]instanceof Array?t[g]:[t[g]];t[g]=c.concat(i)}else if(!i)if(!t[g])t[g]=p;else{let c=t[g]instanceof Array?t[g]:[t[g]];t[g]=c.concat(p)}}}}}return t};k.Observer=new Vt(k.Subscribe,k.Handlers);k.prototype._defineProperty=function(e,i,r,t){Object.defineProperty(e,i,{configurable:!0,get(){return r()},set(n){t&&t(n)}})};k.prototype._defineProperty(W.prototype,"$observer",function(){return k.Observer});k._globalScope=new ve("globalScope");k.prototype._defineProperty(W.prototype,"$globalScope",function(){return k._globalScope});k._universalScope=new ve("universalScope");k.$universalScope=function(){return k._universalScope};k.prototype._defineProperty(W.prototype,"$attrib",function(){return k.Attributes});k.prototype._defineProperty(W.prototype,"$persist",function(){return k.Persistent});k.prototype._defineProperty(W.prototype,"$cache",function(){return k.Cache});k.prototype._defineProperty(W.prototype,"$hash",function(){return k.Hasher});k.prototype.create=function(e,i,r){console.time(e);let t=new W(e,i,r),n=new ve(e);n.registerNotifier(function(s,a,h,u){return k.Attributes.notifier(s,a,h,u)}),k.Attributes.registerNotifier(e,function(s,a){return n.notifier(s,a)}),t.compile.then(()=>{let{subscribe:s,root:a,html:h,handlers:u,role:f}=t;return k.Observer.registerSubscribe(s).then(()=>({root:a,handlers:u}))}).then(({handlers:s,root:a})=>{k.Observer.registerHandlers(s,t.name),this._defineProperty(t,"root",function(){if(t._root)return t._root;{let h=a||"#app",u=document.querySelector(h);if(u)return u}throw new Error(`the selector '${a}' as container of component '${t.name}' is not found!`)},function(h){Object.assign(t,{_root:h})}),t.role=="form"&&(()=>{let h=ei(t),u=()=>t.root.querySelector("FORM");for(let f in h)h.hasOwnProperty(f)&&Object.defineProperty(u,f,{get(){return h[f]}});this._defineProperty(t,"$form",function(){return u})})(),this._defineProperty(t,"$scope",function(){return n})}).then(()=>{t.fire=function(){function s(h,u){u=u?typeof u=="function"?u.bind(t)():function(){return u}.bind(t)():null;let f={[h]:()=>u};if(fn=f[h].bind(t),typeof fn=="function"){let m=function(d){let y={};if(!d)return y;let b=d.attributes;if(b)for(let v=0;v<b.length;v++){let w=b[v],S=w.name,O=w.value;y[S]=O}return y};var p=m;fn.name=h,fn.original=h,fn.binded=t.name,k.Observer.registerHandlers({[h]:fn},t.name);let g=u;if(u&&(u.element||u.root||u.container)){let d=m(u.element),y=m(u.root),b=m(u.container);g={status:0,attributes:{element:d,root:y,container:b}}}k.MainMessageChannel.send({component:t.name,event:h,payload:g});let c=k.Observer.notify(t.name,h,{}).then(()=>k.Observer.results[t.name][h]);return t.await[h]=c,t.await[h]}console.error("the param in fire is not an instance of function")}function a(h,u){for(let f in u)if(u.hasOwnProperty(f)){let p=u[f],g=p.original;Object.defineProperty(h,g,{get(){let m={[g]:function(c,d){if(d!=null&&(d=d),d==null&&g=="destroy"&&(d=!0),d==null&&(d=!1),d){let y=new Promise((b,v)=>{setTimeout(()=>{let w=c;w=w||{},k.Observer.notify(t.name,g,w).then(()=>k.Observer.results[t.name][g]).then(S=>{b(S)}).catch(S=>{console.log(448,t.name,g,w),console.trace(),console.error(S)})})});return t.await[g]=y,t.await[g]}else return p(c)}};return m[g]=m[g].bind(t),m[g].originalName=g,m[g].binded=t.name,m[g]}})}}return a(s,t.handlers),s}()}).then(()=>{t.type=="view"&&(t.toggler=t.toggler(t),k.Components[e]=t)}).then(()=>{t.options.router&&k.Router.subscribe(t.options.router.bind(t)),t.options.data&&t.options.data.bind(t.data)(t),t.options.init&&t.options.init.bind(t)(),t.options.utils&&t.options.utils.bind(t.utils)(t)}).then(()=>{t.type=="model"&&(k.Models[e]=t),t.isStatic&&t.type=="view"&&t.render()})};at.exports=k});var Vi=we(),er=Se(),tr=ke(),ir=B(),rr=Pe(),nr=ie(),sr=ce(),lr=J(),or=ue(),ar=he(),cr=fe(),ur=pe(),hr=Y()(),pr=de()(),dr=ge()(),gr=ye(),mr=be(),ti=ct();window.Cake=ti;})();
